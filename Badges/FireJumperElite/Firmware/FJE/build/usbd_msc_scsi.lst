ARM GAS  /tmp/ccCIT76y.s 			page 1


   1              		.cpu cortex-m0
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 0
  10              		.eabi_attribute 18, 4
  11              		.file	"usbd_msc_scsi.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.SCSI_Inquiry,"ax",%progbits
  16              		.align	1
  17              		.arch armv6s-m
  18              		.syntax unified
  19              		.code	16
  20              		.thumb_func
  21              		.fpu softvfp
  23              	SCSI_Inquiry:
  24              	.LVL0:
  25              	.LFB45:
  26              		.file 1 "Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c"
   1:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
   2:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   ******************************************************************************
   3:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @file    usbd_msc_scsi.c
   4:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @author  MCD Application Team
   5:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @brief   This file provides all the USBD SCSI layer functions.
   6:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   ******************************************************************************
   7:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @attention
   8:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   *
   9:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * <h2><center>&copy; Copyright (c) 2015 STMicroelectronics.
  10:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * All rights reserved.</center></h2>
  11:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   *
  12:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * This software component is licensed by ST under Ultimate Liberty license
  13:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * SLA0044, the "License"; You may not use this file except in compliance with
  14:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * the License. You may obtain a copy of the License at:
  15:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   *                      www.st.com/SLA0044
  16:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   *
  17:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   ******************************************************************************
  18:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  19:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  20:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /* BSPDependencies
  21:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** - "stm32xxxxx_{eval}{discovery}{nucleo_144}.c"
  22:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** - "stm32xxxxx_{eval}{discovery}_io.c"
  23:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** - "stm32xxxxx_{eval}{discovery}{adafruit}_sd.c"
  24:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** EndBSPDependencies */
  25:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  26:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /* Includes ------------------------------------------------------------------*/
  27:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** #include "usbd_msc_bot.h"
  28:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** #include "usbd_msc_scsi.h"
  29:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** #include "usbd_msc.h"
  30:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** #include "usbd_msc_data.h"
  31:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  32:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
ARM GAS  /tmp/ccCIT76y.s 			page 2


  33:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  34:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @addtogroup STM32_USB_DEVICE_LIBRARY
  35:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
  36:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  37:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  38:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  39:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @defgroup MSC_SCSI
  40:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @brief Mass storage SCSI layer module
  41:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
  42:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  43:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  44:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @defgroup MSC_SCSI_Private_TypesDefinitions
  45:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
  46:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  47:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
  48:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @}
  49:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  50:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  51:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  52:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @defgroup MSC_SCSI_Private_Defines
  53:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
  54:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  55:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  56:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
  57:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @}
  58:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  59:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  60:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  61:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @defgroup MSC_SCSI_Private_Macros
  62:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
  63:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  64:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
  65:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @}
  66:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  67:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  68:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  69:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @defgroup MSC_SCSI_Private_Variables
  70:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
  71:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  72:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  73:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
  74:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @}
  75:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  76:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  77:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  78:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @defgroup MSC_SCSI_Private_FunctionPrototypes
  79:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
  80:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
  81:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_TestUnitReady(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  82:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_Inquiry(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  83:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ReadFormatCapacity(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  84:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ReadCapacity10(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  85:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_RequestSense(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  86:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_StartStopUnit(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  87:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ModeSense6(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  88:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ModeSense10(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  89:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_Write10(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
ARM GAS  /tmp/ccCIT76y.s 			page 3


  90:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_Read10(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  91:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_Verify10(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params);
  92:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_CheckAddressRange(USBD_HandleTypeDef *pdev, uint8_t lun,
  93:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                      uint32_t blk_offset, uint32_t blk_nbr);
  94:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
  95:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ProcessRead(USBD_HandleTypeDef *pdev, uint8_t lun);
  96:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ProcessWrite(USBD_HandleTypeDef *pdev, uint8_t lun);
  97:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
  98:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @}
  99:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
 100:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 101:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 102:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /** @defgroup MSC_SCSI_Private_Functions
 103:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   * @{
 104:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   */
 105:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 106:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 107:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 108:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_ProcessCmd
 109:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process SCSI commands
 110:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  pdev: device instance
 111:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 112:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 113:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 114:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 115:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** int8_t SCSI_ProcessCmd(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *cmd)
 116:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 117:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   switch (cmd[0])
 118:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 119:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_TEST_UNIT_READY:
 120:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_TestUnitReady(pdev, lun, cmd);
 121:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 122:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 123:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_REQUEST_SENSE:
 124:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_RequestSense(pdev, lun, cmd);
 125:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 126:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_INQUIRY:
 127:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_Inquiry(pdev, lun, cmd);
 128:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 129:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 130:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_START_STOP_UNIT:
 131:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_StartStopUnit(pdev, lun, cmd);
 132:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 133:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 134:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_ALLOW_MEDIUM_REMOVAL:
 135:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_StartStopUnit(pdev, lun, cmd);
 136:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 137:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 138:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_MODE_SENSE6:
 139:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_ModeSense6(pdev, lun, cmd);
 140:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 141:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 142:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_MODE_SENSE10:
 143:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_ModeSense10(pdev, lun, cmd);
 144:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 145:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 146:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_READ_FORMAT_CAPACITIES:
ARM GAS  /tmp/ccCIT76y.s 			page 4


 147:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_ReadFormatCapacity(pdev, lun, cmd);
 148:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 149:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 150:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_READ_CAPACITY10:
 151:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_ReadCapacity10(pdev, lun, cmd);
 152:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 153:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 154:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_READ10:
 155:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_Read10(pdev, lun, cmd);
 156:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 157:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 158:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_WRITE10:
 159:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_Write10(pdev, lun, cmd);
 160:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 161:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 162:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_VERIFY10:
 163:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_Verify10(pdev, lun, cmd);
 164:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 165:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 166:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     default:
 167:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, lun, ILLEGAL_REQUEST, INVALID_CDB);
 168:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 169:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 170:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 172:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 173:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 174:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 175:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 176:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_TestUnitReady
 177:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process SCSI Test Unit Ready Command
 178:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 179:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 180:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 181:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 182:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_TestUnitReady(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 183:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 184:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 185:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 186:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   /* case 9 : Hi > D0 */
 187:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->cbw.dDataLength != 0U)
 188:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 189:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, hmsc->cbw.bLUN, ILLEGAL_REQUEST, INVALID_CDB);
 190:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 191:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 192:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 193:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 194:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (((USBD_StorageTypeDef *)pdev->pUserData)->IsReady(lun) != 0)
 195:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 196:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, lun, NOT_READY, MEDIUM_NOT_PRESENT);
 197:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_state = USBD_BOT_NO_DATA;
 198:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 199:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 200:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 201:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data_length = 0U;
 202:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 203:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
ARM GAS  /tmp/ccCIT76y.s 			page 5


 204:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 205:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 206:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 207:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_Inquiry
 208:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Inquiry command
 209:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 210:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 211:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 212:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 213:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t  SCSI_Inquiry(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 214:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
  27              		.loc 1 214 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		.loc 1 214 1 is_stmt 0 view .LVU1
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
 215:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint8_t *pPage;
  37              		.loc 1 215 3 is_stmt 1 view .LVU2
 216:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint16_t len;
  38              		.loc 1 216 3 view .LVU3
 217:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
  39              		.loc 1 217 3 view .LVU4
  40              		.loc 1 217 32 is_stmt 0 view .LVU5
  41 0002 AE23     		movs	r3, #174
  42 0004 9B00     		lsls	r3, r3, #2
  43 0006 C458     		ldr	r4, [r0, r3]
  44              	.LVL1:
 218:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 219:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (params[1] & 0x01U)/*Evpd is set*/
  45              		.loc 1 219 3 is_stmt 1 view .LVU6
  46              		.loc 1 219 13 is_stmt 0 view .LVU7
  47 0008 5378     		ldrb	r3, [r2, #1]
  48              		.loc 1 219 6 view .LVU8
  49 000a DB07     		lsls	r3, r3, #31
  50 000c 0CD5     		bpl	.L2
 220:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 221:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = LENGTH_INQUIRY_PAGE00;
  51              		.loc 1 221 5 is_stmt 1 view .LVU9
  52              	.LVL2:
 222:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data_length = len;
  53              		.loc 1 222 5 view .LVU10
  54              		.loc 1 222 27 is_stmt 0 view .LVU11
  55 000e 0723     		movs	r3, #7
  56 0010 6381     		strh	r3, [r4, #10]
 223:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 224:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     while (len)
  57              		.loc 1 224 5 is_stmt 1 view .LVU12
  58              		.loc 1 224 11 is_stmt 0 view .LVU13
  59 0012 05E0     		b	.L3
  60              	.LVL3:
  61              	.L4:
 225:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
ARM GAS  /tmp/ccCIT76y.s 			page 6


 226:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       len--;
  62              		.loc 1 226 7 is_stmt 1 view .LVU14
  63              		.loc 1 226 10 is_stmt 0 view .LVU15
  64 0014 013B     		subs	r3, r3, #1
  65              	.LVL4:
  66              		.loc 1 226 10 view .LVU16
  67 0016 9BB2     		uxth	r3, r3
  68              	.LVL5:
 227:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       hmsc->bot_data[len] = MSC_Page00_Inquiry_Data[len];
  69              		.loc 1 227 7 is_stmt 1 view .LVU17
  70              		.loc 1 227 52 is_stmt 0 view .LVU18
  71 0018 0F4A     		ldr	r2, .L9
  72 001a D15C     		ldrb	r1, [r2, r3]
  73              		.loc 1 227 27 view .LVU19
  74 001c E218     		adds	r2, r4, r3
  75 001e 1173     		strb	r1, [r2, #12]
  76              	.LVL6:
  77              	.L3:
 224:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
  78              		.loc 1 224 11 is_stmt 1 view .LVU20
  79 0020 002B     		cmp	r3, #0
  80 0022 F7D1     		bne	.L4
  81              	.LVL7:
  82              	.L5:
 228:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 229:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 230:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   else
 231:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 232:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     pPage = (uint8_t *)(void *) & ((USBD_StorageTypeDef *)pdev->pUserData)->pInquiry[lun * STANDARD
 233:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = (uint16_t)pPage[4] + 5U;
 234:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 235:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (params[4] <= len)
 236:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 237:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       len = params[4];
 238:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 239:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data_length = len;
 240:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 241:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     while (len)
 242:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 243:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       len--;
 244:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       hmsc->bot_data[len] = pPage[len];
 245:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 246:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 247:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 248:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
  83              		.loc 1 248 3 view .LVU21
 249:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
  84              		.loc 1 249 1 is_stmt 0 view .LVU22
  85 0024 0020     		movs	r0, #0
  86              		@ sp needed
  87              	.LVL8:
  88              		.loc 1 249 1 view .LVU23
  89 0026 10BD     		pop	{r4, pc}
  90              	.LVL9:
  91              	.L2:
 232:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = (uint16_t)pPage[4] + 5U;
  92              		.loc 1 232 5 is_stmt 1 view .LVU24
ARM GAS  /tmp/ccCIT76y.s 			page 7


 232:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = (uint16_t)pPage[4] + 5U;
  93              		.loc 1 232 63 is_stmt 0 view .LVU25
  94 0028 AF23     		movs	r3, #175
  95 002a 9B00     		lsls	r3, r3, #2
  96 002c C358     		ldr	r3, [r0, r3]
 232:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = (uint16_t)pPage[4] + 5U;
  97              		.loc 1 232 75 view .LVU26
  98 002e D869     		ldr	r0, [r3, #28]
  99              	.LVL10:
 232:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = (uint16_t)pPage[4] + 5U;
 100              		.loc 1 232 90 view .LVU27
 101 0030 CB00     		lsls	r3, r1, #3
 102 0032 5918     		adds	r1, r3, r1
 103              	.LVL11:
 232:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = (uint16_t)pPage[4] + 5U;
 104              		.loc 1 232 90 view .LVU28
 105 0034 8900     		lsls	r1, r1, #2
 232:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = (uint16_t)pPage[4] + 5U;
 106              		.loc 1 232 11 view .LVU29
 107 0036 4018     		adds	r0, r0, r1
 108              	.LVL12:
 233:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 109              		.loc 1 233 5 is_stmt 1 view .LVU30
 233:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 110              		.loc 1 233 26 is_stmt 0 view .LVU31
 111 0038 0179     		ldrb	r1, [r0, #4]
 233:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 112              		.loc 1 233 9 view .LVU32
 113 003a 0531     		adds	r1, r1, #5
 114              	.LVL13:
 235:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 115              		.loc 1 235 5 is_stmt 1 view .LVU33
 235:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 116              		.loc 1 235 15 is_stmt 0 view .LVU34
 117 003c 1379     		ldrb	r3, [r2, #4]
 235:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 118              		.loc 1 235 8 view .LVU35
 119 003e 8B42     		cmp	r3, r1
 120 0040 00D9     		bls	.L6
 233:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 121              		.loc 1 233 9 view .LVU36
 122 0042 0B00     		movs	r3, r1
 123              	.L6:
 124              	.LVL14:
 239:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 125              		.loc 1 239 5 is_stmt 1 view .LVU37
 239:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 126              		.loc 1 239 27 is_stmt 0 view .LVU38
 127 0044 6381     		strh	r3, [r4, #10]
 241:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 128              		.loc 1 241 5 is_stmt 1 view .LVU39
 129              	.LVL15:
 130              	.L7:
 241:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 131              		.loc 1 241 11 view .LVU40
 132 0046 002B     		cmp	r3, #0
 133 0048 ECD0     		beq	.L5
ARM GAS  /tmp/ccCIT76y.s 			page 8


 243:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       hmsc->bot_data[len] = pPage[len];
 134              		.loc 1 243 7 view .LVU41
 243:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       hmsc->bot_data[len] = pPage[len];
 135              		.loc 1 243 10 is_stmt 0 view .LVU42
 136 004a 013B     		subs	r3, r3, #1
 137              	.LVL16:
 243:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       hmsc->bot_data[len] = pPage[len];
 138              		.loc 1 243 10 view .LVU43
 139 004c 9BB2     		uxth	r3, r3
 140              	.LVL17:
 244:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 141              		.loc 1 244 7 is_stmt 1 view .LVU44
 244:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 142              		.loc 1 244 34 is_stmt 0 view .LVU45
 143 004e C15C     		ldrb	r1, [r0, r3]
 244:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 144              		.loc 1 244 27 view .LVU46
 145 0050 E218     		adds	r2, r4, r3
 146 0052 1173     		strb	r1, [r2, #12]
 147 0054 F7E7     		b	.L7
 148              	.L10:
 149 0056 C046     		.align	2
 150              	.L9:
 151 0058 00000000 		.word	MSC_Page00_Inquiry_Data
 152              		.cfi_endproc
 153              	.LFE45:
 155              		.section	.text.SCSI_ModeSense6,"ax",%progbits
 156              		.align	1
 157              		.syntax unified
 158              		.code	16
 159              		.thumb_func
 160              		.fpu softvfp
 162              	SCSI_ModeSense6:
 163              	.LVL18:
 164              	.LFB48:
 250:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 251:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 252:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_ReadCapacity10
 253:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Read Capacity 10 command
 254:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 255:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 256:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 257:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 258:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ReadCapacity10(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 259:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 260:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 261:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (((USBD_StorageTypeDef *)pdev->pUserData)->GetCapacity(lun, &hmsc->scsi_blk_nbr, &hmsc->scsi_b
 263:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 264:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, lun, NOT_READY, MEDIUM_NOT_PRESENT);
 265:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 266:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 267:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   else
 268:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 269:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 270:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[0] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >> 24);
 271:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[1] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >> 16);
ARM GAS  /tmp/ccCIT76y.s 			page 9


 272:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[2] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >>  8);
 273:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[3] = (uint8_t)(hmsc->scsi_blk_nbr - 1U);
 274:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 275:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[4] = (uint8_t)(hmsc->scsi_blk_size >>  24);
 276:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)(hmsc->scsi_blk_size >>  16);
 277:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[6] = (uint8_t)(hmsc->scsi_blk_size >>  8);
 278:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(hmsc->scsi_blk_size);
 279:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 280:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data_length = 8U;
 281:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return 0;
 282:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 283:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 284:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 285:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_ReadFormatCapacity
 286:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Read Format Capacity command
 287:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 288:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 289:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 290:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 291:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ReadFormatCapacity(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 292:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 293:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 294:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 295:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint16_t blk_size;
 296:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint32_t blk_nbr;
 297:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint16_t i;
 298:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   for (i = 0U; i < 12U ; i++)
 300:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 301:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[i] = 0U;
 302:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 303:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (((USBD_StorageTypeDef *)pdev->pUserData)->GetCapacity(lun, &blk_nbr, &blk_size) != 0U)
 305:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 306:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, lun, NOT_READY, MEDIUM_NOT_PRESENT);
 307:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 308:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 309:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   else
 310:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 311:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[3] = 0x08U;
 312:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[4] = (uint8_t)((blk_nbr - 1U) >> 24);
 313:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)((blk_nbr - 1U) >> 16);
 314:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[6] = (uint8_t)((blk_nbr - 1U) >>  8);
 315:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(blk_nbr - 1U);
 316:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 317:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[8] = 0x02U;
 318:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[9] = (uint8_t)(blk_size >>  16);
 319:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[10] = (uint8_t)(blk_size >>  8);
 320:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[11] = (uint8_t)(blk_size);
 321:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 322:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data_length = 12U;
 323:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return 0;
 324:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 325:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 326:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 327:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_ModeSense6
 328:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Mode Sense6 command
ARM GAS  /tmp/ccCIT76y.s 			page 10


 329:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 330:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 331:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 332:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 333:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ModeSense6(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 334:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 165              		.loc 1 334 1 is_stmt 1 view -0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 0
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169              		@ link register save eliminated.
 335:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 170              		.loc 1 335 3 view .LVU48
 171              		.loc 1 335 32 is_stmt 0 view .LVU49
 172 0000 AE23     		movs	r3, #174
 173 0002 9B00     		lsls	r3, r3, #2
 174 0004 C058     		ldr	r0, [r0, r3]
 175              	.LVL19:
 336:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint16_t len = 8U;
 176              		.loc 1 336 3 is_stmt 1 view .LVU50
 337:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data_length = len;
 177              		.loc 1 337 3 view .LVU51
 178              		.loc 1 337 25 is_stmt 0 view .LVU52
 179 0006 0823     		movs	r3, #8
 180 0008 4381     		strh	r3, [r0, #10]
 338:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 339:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   while (len)
 181              		.loc 1 339 3 is_stmt 1 view .LVU53
 182              		.loc 1 339 9 is_stmt 0 view .LVU54
 183 000a 05E0     		b	.L12
 184              	.LVL20:
 185              	.L13:
 340:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 341:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len--;
 186              		.loc 1 341 5 is_stmt 1 view .LVU55
 187              		.loc 1 341 8 is_stmt 0 view .LVU56
 188 000c 013B     		subs	r3, r3, #1
 189              	.LVL21:
 190              		.loc 1 341 8 view .LVU57
 191 000e 9BB2     		uxth	r3, r3
 192              	.LVL22:
 342:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[len] = MSC_Mode_Sense6_data[len];
 193              		.loc 1 342 5 is_stmt 1 view .LVU58
 194              		.loc 1 342 47 is_stmt 0 view .LVU59
 195 0010 034A     		ldr	r2, .L14
 196 0012 D15C     		ldrb	r1, [r2, r3]
 197              		.loc 1 342 25 view .LVU60
 198 0014 C218     		adds	r2, r0, r3
 199 0016 1173     		strb	r1, [r2, #12]
 200              	.LVL23:
 201              	.L12:
 339:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 202              		.loc 1 339 9 is_stmt 1 view .LVU61
 203 0018 002B     		cmp	r3, #0
 204 001a F7D1     		bne	.L13
 343:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 344:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
ARM GAS  /tmp/ccCIT76y.s 			page 11


 205              		.loc 1 344 3 view .LVU62
 345:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 206              		.loc 1 345 1 is_stmt 0 view .LVU63
 207 001c 0020     		movs	r0, #0
 208              	.LVL24:
 209              		.loc 1 345 1 view .LVU64
 210              		@ sp needed
 211 001e 7047     		bx	lr
 212              	.L15:
 213              		.align	2
 214              	.L14:
 215 0020 00000000 		.word	MSC_Mode_Sense6_data
 216              		.cfi_endproc
 217              	.LFE48:
 219              		.section	.text.SCSI_ModeSense10,"ax",%progbits
 220              		.align	1
 221              		.syntax unified
 222              		.code	16
 223              		.thumb_func
 224              		.fpu softvfp
 226              	SCSI_ModeSense10:
 227              	.LVL25:
 228              	.LFB49:
 346:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 347:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 348:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_ModeSense10
 349:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Mode Sense10 command
 350:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 351:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 352:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 353:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 354:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ModeSense10(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 355:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 229              		.loc 1 355 1 is_stmt 1 view -0
 230              		.cfi_startproc
 231              		@ args = 0, pretend = 0, frame = 0
 232              		@ frame_needed = 0, uses_anonymous_args = 0
 233              		@ link register save eliminated.
 356:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint16_t len = 8U;
 234              		.loc 1 356 3 view .LVU66
 357:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 235              		.loc 1 357 3 view .LVU67
 236              		.loc 1 357 32 is_stmt 0 view .LVU68
 237 0000 AE23     		movs	r3, #174
 238 0002 9B00     		lsls	r3, r3, #2
 239 0004 C058     		ldr	r0, [r0, r3]
 240              	.LVL26:
 358:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 359:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data_length = len;
 241              		.loc 1 359 3 is_stmt 1 view .LVU69
 242              		.loc 1 359 25 is_stmt 0 view .LVU70
 243 0006 0823     		movs	r3, #8
 244 0008 4381     		strh	r3, [r0, #10]
 360:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 361:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   while (len)
 245              		.loc 1 361 3 is_stmt 1 view .LVU71
 246              		.loc 1 361 9 is_stmt 0 view .LVU72
ARM GAS  /tmp/ccCIT76y.s 			page 12


 247 000a 05E0     		b	.L17
 248              	.LVL27:
 249              	.L18:
 362:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 363:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len--;
 250              		.loc 1 363 5 is_stmt 1 view .LVU73
 251              		.loc 1 363 8 is_stmt 0 view .LVU74
 252 000c 013B     		subs	r3, r3, #1
 253              	.LVL28:
 254              		.loc 1 363 8 view .LVU75
 255 000e 9BB2     		uxth	r3, r3
 256              	.LVL29:
 364:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[len] = MSC_Mode_Sense10_data[len];
 257              		.loc 1 364 5 is_stmt 1 view .LVU76
 258              		.loc 1 364 48 is_stmt 0 view .LVU77
 259 0010 034A     		ldr	r2, .L19
 260 0012 D15C     		ldrb	r1, [r2, r3]
 261              		.loc 1 364 25 view .LVU78
 262 0014 C218     		adds	r2, r0, r3
 263 0016 1173     		strb	r1, [r2, #12]
 264              	.LVL30:
 265              	.L17:
 361:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 266              		.loc 1 361 9 is_stmt 1 view .LVU79
 267 0018 002B     		cmp	r3, #0
 268 001a F7D1     		bne	.L18
 365:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 366:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 367:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 269              		.loc 1 367 3 view .LVU80
 368:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 270              		.loc 1 368 1 is_stmt 0 view .LVU81
 271 001c 0020     		movs	r0, #0
 272              	.LVL31:
 273              		.loc 1 368 1 view .LVU82
 274              		@ sp needed
 275 001e 7047     		bx	lr
 276              	.L20:
 277              		.align	2
 278              	.L19:
 279 0020 00000000 		.word	MSC_Mode_Sense10_data
 280              		.cfi_endproc
 281              	.LFE49:
 283              		.section	.text.SCSI_RequestSense,"ax",%progbits
 284              		.align	1
 285              		.syntax unified
 286              		.code	16
 287              		.thumb_func
 288              		.fpu softvfp
 290              	SCSI_RequestSense:
 291              	.LVL32:
 292              	.LFB50:
 369:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 370:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 371:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_RequestSense
 372:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Request Sense command
 373:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
ARM GAS  /tmp/ccCIT76y.s 			page 13


 374:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 375:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 376:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 377:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 378:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_RequestSense(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 379:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 293              		.loc 1 379 1 is_stmt 1 view -0
 294              		.cfi_startproc
 295              		@ args = 0, pretend = 0, frame = 0
 296              		@ frame_needed = 0, uses_anonymous_args = 0
 297              		.loc 1 379 1 is_stmt 0 view .LVU84
 298 0000 10B5     		push	{r4, lr}
 299              	.LCFI1:
 300              		.cfi_def_cfa_offset 8
 301              		.cfi_offset 4, -8
 302              		.cfi_offset 14, -4
 380:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint8_t i;
 303              		.loc 1 380 3 is_stmt 1 view .LVU85
 381:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 304              		.loc 1 381 3 view .LVU86
 305              		.loc 1 381 32 is_stmt 0 view .LVU87
 306 0002 AE23     		movs	r3, #174
 307 0004 9B00     		lsls	r3, r3, #2
 308 0006 C458     		ldr	r4, [r0, r3]
 309              	.LVL33:
 382:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 383:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   for (i = 0U ; i < REQUEST_SENSE_DATA_LEN; i++)
 310              		.loc 1 383 3 is_stmt 1 view .LVU88
 311              		.loc 1 383 10 is_stmt 0 view .LVU89
 312 0008 0023     		movs	r3, #0
 313              	.LVL34:
 314              	.L22:
 315              		.loc 1 383 17 is_stmt 1 discriminator 1 view .LVU90
 316              		.loc 1 383 3 is_stmt 0 discriminator 1 view .LVU91
 317 000a 112B     		cmp	r3, #17
 318 000c 05D8     		bhi	.L26
 384:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 385:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[i] = 0U;
 319              		.loc 1 385 5 is_stmt 1 discriminator 3 view .LVU92
 320              		.loc 1 385 23 is_stmt 0 discriminator 3 view .LVU93
 321 000e E118     		adds	r1, r4, r3
 322 0010 0020     		movs	r0, #0
 323 0012 0873     		strb	r0, [r1, #12]
 383:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 324              		.loc 1 383 45 is_stmt 1 discriminator 3 view .LVU94
 383:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 325              		.loc 1 383 46 is_stmt 0 discriminator 3 view .LVU95
 326 0014 0133     		adds	r3, r3, #1
 327              	.LVL35:
 383:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 328              		.loc 1 383 46 discriminator 3 view .LVU96
 329 0016 DBB2     		uxtb	r3, r3
 330              	.LVL36:
 383:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 331              		.loc 1 383 46 discriminator 3 view .LVU97
 332 0018 F7E7     		b	.L22
 333              	.L26:
ARM GAS  /tmp/ccCIT76y.s 			page 14


 386:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 387:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 388:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data[0] = 0x70U;
 334              		.loc 1 388 3 is_stmt 1 view .LVU98
 335              		.loc 1 388 21 is_stmt 0 view .LVU99
 336 001a 7023     		movs	r3, #112
 337              	.LVL37:
 338              		.loc 1 388 21 view .LVU100
 339 001c 2373     		strb	r3, [r4, #12]
 389:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data[7] = REQUEST_SENSE_DATA_LEN - 6U;
 340              		.loc 1 389 3 is_stmt 1 view .LVU101
 341              		.loc 1 389 21 is_stmt 0 view .LVU102
 342 001e 643B     		subs	r3, r3, #100
 343 0020 E374     		strb	r3, [r4, #19]
 390:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 391:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if ((hmsc->scsi_sense_head != hmsc->scsi_sense_tail))
 344              		.loc 1 391 3 is_stmt 1 view .LVU103
 345              		.loc 1 391 12 is_stmt 0 view .LVU104
 346 0022 9723     		movs	r3, #151
 347 0024 9B00     		lsls	r3, r3, #2
 348 0026 E35C     		ldrb	r3, [r4, r3]
 349              		.loc 1 391 37 view .LVU105
 350 0028 1049     		ldr	r1, .L28
 351 002a 615C     		ldrb	r1, [r4, r1]
 352              		.loc 1 391 6 view .LVU106
 353 002c 8B42     		cmp	r3, r1
 354 002e 10D0     		beq	.L24
 392:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 393:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 394:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[2]     = hmsc->scsi_sense[hmsc->scsi_sense_head].Skey;
 355              		.loc 1 394 5 is_stmt 1 view .LVU107
 356              		.loc 1 394 68 is_stmt 0 view .LVU108
 357 0030 1900     		movs	r1, r3
 358 0032 4731     		adds	r1, r1, #71
 359 0034 C900     		lsls	r1, r1, #3
 360 0036 6118     		adds	r1, r4, r1
 361 0038 0879     		ldrb	r0, [r1, #4]
 362              		.loc 1 394 27 view .LVU109
 363 003a A073     		strb	r0, [r4, #14]
 395:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[12]    = hmsc->scsi_sense[hmsc->scsi_sense_head].w.b.ASCQ;
 364              		.loc 1 395 5 is_stmt 1 view .LVU110
 365              		.loc 1 395 72 is_stmt 0 view .LVU111
 366 003c 487A     		ldrb	r0, [r1, #9]
 367              		.loc 1 395 27 view .LVU112
 368 003e 2076     		strb	r0, [r4, #24]
 396:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[13]    = hmsc->scsi_sense[hmsc->scsi_sense_head].w.b.ASC;
 369              		.loc 1 396 5 is_stmt 1 view .LVU113
 370              		.loc 1 396 72 is_stmt 0 view .LVU114
 371 0040 097A     		ldrb	r1, [r1, #8]
 372              		.loc 1 396 27 view .LVU115
 373 0042 6176     		strb	r1, [r4, #25]
 397:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->scsi_sense_head++;
 374              		.loc 1 397 5 is_stmt 1 view .LVU116
 375              		.loc 1 397 26 is_stmt 0 view .LVU117
 376 0044 0133     		adds	r3, r3, #1
 377 0046 DBB2     		uxtb	r3, r3
 378 0048 9721     		movs	r1, #151
ARM GAS  /tmp/ccCIT76y.s 			page 15


 379 004a 8900     		lsls	r1, r1, #2
 380 004c 6354     		strb	r3, [r4, r1]
 398:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 399:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (hmsc->scsi_sense_head == SENSE_LIST_DEEPTH)
 381              		.loc 1 399 5 is_stmt 1 view .LVU118
 382              		.loc 1 399 8 is_stmt 0 view .LVU119
 383 004e 042B     		cmp	r3, #4
 384 0050 07D0     		beq	.L27
 385              	.L24:
 400:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 401:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       hmsc->scsi_sense_head = 0U;
 402:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 403:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 404:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data_length = REQUEST_SENSE_DATA_LEN;
 386              		.loc 1 404 3 is_stmt 1 view .LVU120
 387              		.loc 1 404 25 is_stmt 0 view .LVU121
 388 0052 1223     		movs	r3, #18
 389 0054 6381     		strh	r3, [r4, #10]
 405:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 406:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (params[4] <= REQUEST_SENSE_DATA_LEN)
 390              		.loc 1 406 3 is_stmt 1 view .LVU122
 391              		.loc 1 406 13 is_stmt 0 view .LVU123
 392 0056 1379     		ldrb	r3, [r2, #4]
 393              		.loc 1 406 6 view .LVU124
 394 0058 122B     		cmp	r3, #18
 395 005a 00D8     		bhi	.L25
 407:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 408:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data_length = params[4];
 396              		.loc 1 408 5 is_stmt 1 view .LVU125
 397              		.loc 1 408 27 is_stmt 0 view .LVU126
 398 005c 6381     		strh	r3, [r4, #10]
 399              	.L25:
 409:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 410:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 400              		.loc 1 410 3 is_stmt 1 view .LVU127
 411:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 401              		.loc 1 411 1 is_stmt 0 view .LVU128
 402 005e 0020     		movs	r0, #0
 403              		@ sp needed
 404              	.LVL38:
 405              		.loc 1 411 1 view .LVU129
 406 0060 10BD     		pop	{r4, pc}
 407              	.LVL39:
 408              	.L27:
 401:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 409              		.loc 1 401 7 is_stmt 1 view .LVU130
 401:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 410              		.loc 1 401 29 is_stmt 0 view .LVU131
 411 0062 0B00     		movs	r3, r1
 412 0064 0021     		movs	r1, #0
 413 0066 E154     		strb	r1, [r4, r3]
 414 0068 F3E7     		b	.L24
 415              	.L29:
 416 006a C046     		.align	2
 417              	.L28:
 418 006c 5D020000 		.word	605
 419              		.cfi_endproc
ARM GAS  /tmp/ccCIT76y.s 			page 16


 420              	.LFE50:
 422              		.section	.text.SCSI_StartStopUnit,"ax",%progbits
 423              		.align	1
 424              		.syntax unified
 425              		.code	16
 426              		.thumb_func
 427              		.fpu softvfp
 429              	SCSI_StartStopUnit:
 430              	.LVL40:
 431              	.LFB52:
 412:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 413:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 414:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_SenseCode
 415:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Load the last error code in the error list
 416:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 417:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  sKey: Sense Key
 418:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  ASC: Additional Sense Key
 419:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval none
 420:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 421:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 422:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** void SCSI_SenseCode(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t sKey, uint8_t ASC)
 423:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 424:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 425:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 426:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense[hmsc->scsi_sense_tail].Skey  = sKey;
 427:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense[hmsc->scsi_sense_tail].w.ASC = ASC << 8;
 428:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense_tail++;
 429:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->scsi_sense_tail == SENSE_LIST_DEEPTH)
 430:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 431:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->scsi_sense_tail = 0U;
 432:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 433:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 434:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 435:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_StartStopUnit
 436:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Start Stop Unit command
 437:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 438:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 439:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 440:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 441:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_StartStopUnit(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 442:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 432              		.loc 1 442 1 is_stmt 1 view -0
 433              		.cfi_startproc
 434              		@ args = 0, pretend = 0, frame = 0
 435              		@ frame_needed = 0, uses_anonymous_args = 0
 436              		@ link register save eliminated.
 443:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 437              		.loc 1 443 3 view .LVU133
 438              		.loc 1 443 32 is_stmt 0 view .LVU134
 439 0000 AE23     		movs	r3, #174
 440 0002 9B00     		lsls	r3, r3, #2
 441 0004 C358     		ldr	r3, [r0, r3]
 442              	.LVL41:
 444:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data_length = 0U;
 443              		.loc 1 444 3 is_stmt 1 view .LVU135
 444              		.loc 1 444 25 is_stmt 0 view .LVU136
 445 0006 0022     		movs	r2, #0
ARM GAS  /tmp/ccCIT76y.s 			page 17


 446              	.LVL42:
 447              		.loc 1 444 25 view .LVU137
 448 0008 5A81     		strh	r2, [r3, #10]
 445:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 449              		.loc 1 445 3 is_stmt 1 view .LVU138
 446:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 450              		.loc 1 446 1 is_stmt 0 view .LVU139
 451 000a 0020     		movs	r0, #0
 452              	.LVL43:
 453              		.loc 1 446 1 view .LVU140
 454              		@ sp needed
 455 000c 7047     		bx	lr
 456              		.cfi_endproc
 457              	.LFE52:
 459              		.section	.text.SCSI_SenseCode,"ax",%progbits
 460              		.align	1
 461              		.global	SCSI_SenseCode
 462              		.syntax unified
 463              		.code	16
 464              		.thumb_func
 465              		.fpu softvfp
 467              	SCSI_SenseCode:
 468              	.LVL44:
 469              	.LFB51:
 423:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 470              		.loc 1 423 1 is_stmt 1 view -0
 471              		.cfi_startproc
 472              		@ args = 0, pretend = 0, frame = 0
 473              		@ frame_needed = 0, uses_anonymous_args = 0
 423:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 474              		.loc 1 423 1 is_stmt 0 view .LVU142
 475 0000 10B5     		push	{r4, lr}
 476              	.LCFI2:
 477              		.cfi_def_cfa_offset 8
 478              		.cfi_offset 4, -8
 479              		.cfi_offset 14, -4
 424:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 480              		.loc 1 424 3 is_stmt 1 view .LVU143
 424:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 481              		.loc 1 424 32 is_stmt 0 view .LVU144
 482 0002 AE23     		movs	r3, #174
 483              	.LVL45:
 424:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 484              		.loc 1 424 32 view .LVU145
 485 0004 9B00     		lsls	r3, r3, #2
 486 0006 C058     		ldr	r0, [r0, r3]
 487              	.LVL46:
 426:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense[hmsc->scsi_sense_tail].w.ASC = ASC << 8;
 488              		.loc 1 426 3 is_stmt 1 view .LVU146
 426:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense[hmsc->scsi_sense_tail].w.ASC = ASC << 8;
 489              		.loc 1 426 24 is_stmt 0 view .LVU147
 490 0008 084C     		ldr	r4, .L34
 491 000a 035D     		ldrb	r3, [r0, r4]
 426:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense[hmsc->scsi_sense_tail].w.ASC = ASC << 8;
 492              		.loc 1 426 49 view .LVU148
 493 000c 1900     		movs	r1, r3
 494              	.LVL47:
ARM GAS  /tmp/ccCIT76y.s 			page 18


 426:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense[hmsc->scsi_sense_tail].w.ASC = ASC << 8;
 495              		.loc 1 426 49 view .LVU149
 496 000e 4731     		adds	r1, r1, #71
 497 0010 C900     		lsls	r1, r1, #3
 498 0012 4118     		adds	r1, r0, r1
 499 0014 0A71     		strb	r2, [r1, #4]
 427:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense_tail++;
 500              		.loc 1 427 3 is_stmt 1 view .LVU150
 427:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense_tail++;
 501              		.loc 1 427 49 is_stmt 0 view .LVU151
 502 0016 0022     		movs	r2, #0
 503              	.LVL48:
 427:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_sense_tail++;
 504              		.loc 1 427 49 view .LVU152
 505 0018 0A72     		strb	r2, [r1, #8]
 428:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->scsi_sense_tail == SENSE_LIST_DEEPTH)
 506              		.loc 1 428 3 is_stmt 1 view .LVU153
 428:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->scsi_sense_tail == SENSE_LIST_DEEPTH)
 507              		.loc 1 428 24 is_stmt 0 view .LVU154
 508 001a 0133     		adds	r3, r3, #1
 509 001c DBB2     		uxtb	r3, r3
 510 001e 0355     		strb	r3, [r0, r4]
 511              	.LVL49:
 429:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 512              		.loc 1 429 3 is_stmt 1 view .LVU155
 429:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 513              		.loc 1 429 6 is_stmt 0 view .LVU156
 514 0020 042B     		cmp	r3, #4
 515 0022 00D0     		beq	.L33
 516              	.L31:
 433:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 517              		.loc 1 433 1 view .LVU157
 518              		@ sp needed
 519 0024 10BD     		pop	{r4, pc}
 520              	.L33:
 431:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 521              		.loc 1 431 5 is_stmt 1 view .LVU158
 431:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 522              		.loc 1 431 27 is_stmt 0 view .LVU159
 523 0026 0255     		strb	r2, [r0, r4]
 433:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 524              		.loc 1 433 1 view .LVU160
 525 0028 FCE7     		b	.L31
 526              	.L35:
 527 002a C046     		.align	2
 528              	.L34:
 529 002c 5D020000 		.word	605
 530              		.cfi_endproc
 531              	.LFE51:
 533              		.section	.text.SCSI_TestUnitReady,"ax",%progbits
 534              		.align	1
 535              		.syntax unified
 536              		.code	16
 537              		.thumb_func
 538              		.fpu softvfp
 540              	SCSI_TestUnitReady:
 541              	.LVL50:
ARM GAS  /tmp/ccCIT76y.s 			page 19


 542              	.LFB44:
 183:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 543              		.loc 1 183 1 is_stmt 1 view -0
 544              		.cfi_startproc
 545              		@ args = 0, pretend = 0, frame = 0
 546              		@ frame_needed = 0, uses_anonymous_args = 0
 183:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 547              		.loc 1 183 1 is_stmt 0 view .LVU162
 548 0000 70B5     		push	{r4, r5, r6, lr}
 549              	.LCFI3:
 550              		.cfi_def_cfa_offset 16
 551              		.cfi_offset 4, -16
 552              		.cfi_offset 5, -12
 553              		.cfi_offset 6, -8
 554              		.cfi_offset 14, -4
 555 0002 0400     		movs	r4, r0
 556 0004 0E00     		movs	r6, r1
 184:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 557              		.loc 1 184 3 is_stmt 1 view .LVU163
 184:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 558              		.loc 1 184 32 is_stmt 0 view .LVU164
 559 0006 AE23     		movs	r3, #174
 560 0008 9B00     		lsls	r3, r3, #2
 561 000a C558     		ldr	r5, [r0, r3]
 562              	.LVL51:
 187:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 563              		.loc 1 187 3 is_stmt 1 view .LVU165
 187:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 564              		.loc 1 187 16 is_stmt 0 view .LVU166
 565 000c A43B     		subs	r3, r3, #164
 566 000e EB58     		ldr	r3, [r5, r3]
 187:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 567              		.loc 1 187 6 view .LVU167
 568 0010 002B     		cmp	r3, #0
 569 0012 0AD1     		bne	.L40
 194:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 570              		.loc 1 194 3 is_stmt 1 view .LVU168
 194:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 571              		.loc 1 194 35 is_stmt 0 view .LVU169
 572 0014 AF23     		movs	r3, #175
 573 0016 9B00     		lsls	r3, r3, #2
 574 0018 C358     		ldr	r3, [r0, r3]
 194:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 575              		.loc 1 194 47 view .LVU170
 576 001a 9B68     		ldr	r3, [r3, #8]
 194:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 577              		.loc 1 194 8 view .LVU171
 578 001c 0800     		movs	r0, r1
 579              	.LVL52:
 194:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 580              		.loc 1 194 8 view .LVU172
 581 001e 9847     		blx	r3
 582              	.LVL53:
 194:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 583              		.loc 1 194 6 view .LVU173
 584 0020 0028     		cmp	r0, #0
 585 0022 0CD1     		bne	.L41
ARM GAS  /tmp/ccCIT76y.s 			page 20


 201:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 586              		.loc 1 201 3 is_stmt 1 view .LVU174
 201:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 587              		.loc 1 201 25 is_stmt 0 view .LVU175
 588 0024 0023     		movs	r3, #0
 589 0026 6B81     		strh	r3, [r5, #10]
 203:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 590              		.loc 1 203 3 is_stmt 1 view .LVU176
 591              	.L38:
 204:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 592              		.loc 1 204 1 is_stmt 0 view .LVU177
 593              		@ sp needed
 594              	.LVL54:
 595              	.LVL55:
 204:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 596              		.loc 1 204 1 view .LVU178
 597 0028 70BD     		pop	{r4, r5, r6, pc}
 598              	.LVL56:
 599              	.L40:
 189:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 600              		.loc 1 189 5 is_stmt 1 view .LVU179
 601 002a 0A4B     		ldr	r3, .L42
 602 002c E95C     		ldrb	r1, [r5, r3]
 603              	.LVL57:
 189:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 604              		.loc 1 189 5 is_stmt 0 view .LVU180
 605 002e FA3B     		subs	r3, r3, #250
 606 0030 FF3B     		subs	r3, r3, #255
 607 0032 0522     		movs	r2, #5
 608              	.LVL58:
 189:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 609              		.loc 1 189 5 view .LVU181
 610 0034 FFF7FEFF 		bl	SCSI_SenseCode
 611              	.LVL59:
 191:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 612              		.loc 1 191 5 is_stmt 1 view .LVU182
 191:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 613              		.loc 1 191 12 is_stmt 0 view .LVU183
 614 0038 0120     		movs	r0, #1
 615 003a 4042     		rsbs	r0, r0, #0
 616 003c F4E7     		b	.L38
 617              	.L41:
 196:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_state = USBD_BOT_NO_DATA;
 618              		.loc 1 196 5 is_stmt 1 view .LVU184
 619 003e 3A23     		movs	r3, #58
 620 0040 0222     		movs	r2, #2
 621 0042 3100     		movs	r1, r6
 622 0044 2000     		movs	r0, r4
 623 0046 FFF7FEFF 		bl	SCSI_SenseCode
 624              	.LVL60:
 197:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 625              		.loc 1 197 5 view .LVU185
 197:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 626              		.loc 1 197 21 is_stmt 0 view .LVU186
 627 004a 0523     		movs	r3, #5
 628 004c 2B72     		strb	r3, [r5, #8]
 199:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
ARM GAS  /tmp/ccCIT76y.s 			page 21


 629              		.loc 1 199 5 is_stmt 1 view .LVU187
 199:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 630              		.loc 1 199 12 is_stmt 0 view .LVU188
 631 004e 0120     		movs	r0, #1
 632 0050 4042     		rsbs	r0, r0, #0
 633 0052 E9E7     		b	.L38
 634              	.L43:
 635              		.align	2
 636              	.L42:
 637 0054 19020000 		.word	537
 638              		.cfi_endproc
 639              	.LFE44:
 641              		.section	.text.SCSI_ReadFormatCapacity,"ax",%progbits
 642              		.align	1
 643              		.syntax unified
 644              		.code	16
 645              		.thumb_func
 646              		.fpu softvfp
 648              	SCSI_ReadFormatCapacity:
 649              	.LVL61:
 650              	.LFB47:
 292:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 651              		.loc 1 292 1 is_stmt 1 view -0
 652              		.cfi_startproc
 653              		@ args = 0, pretend = 0, frame = 8
 654              		@ frame_needed = 0, uses_anonymous_args = 0
 292:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 655              		.loc 1 292 1 is_stmt 0 view .LVU190
 656 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 657              	.LCFI4:
 658              		.cfi_def_cfa_offset 20
 659              		.cfi_offset 4, -20
 660              		.cfi_offset 5, -16
 661              		.cfi_offset 6, -12
 662              		.cfi_offset 7, -8
 663              		.cfi_offset 14, -4
 664 0002 83B0     		sub	sp, sp, #12
 665              	.LCFI5:
 666              		.cfi_def_cfa_offset 32
 667 0004 0600     		movs	r6, r0
 668 0006 0F00     		movs	r7, r1
 293:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 669              		.loc 1 293 3 is_stmt 1 view .LVU191
 293:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 670              		.loc 1 293 32 is_stmt 0 view .LVU192
 671 0008 AE23     		movs	r3, #174
 672 000a 9B00     		lsls	r3, r3, #2
 673 000c C558     		ldr	r5, [r0, r3]
 674              	.LVL62:
 295:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint32_t blk_nbr;
 675              		.loc 1 295 3 is_stmt 1 view .LVU193
 296:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint16_t i;
 676              		.loc 1 296 3 view .LVU194
 297:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 677              		.loc 1 297 3 view .LVU195
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 678              		.loc 1 299 3 view .LVU196
ARM GAS  /tmp/ccCIT76y.s 			page 22


 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 679              		.loc 1 299 10 is_stmt 0 view .LVU197
 680 000e 0023     		movs	r3, #0
 681              	.LVL63:
 682              	.L45:
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 683              		.loc 1 299 16 is_stmt 1 discriminator 1 view .LVU198
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 684              		.loc 1 299 3 is_stmt 0 discriminator 1 view .LVU199
 685 0010 0B2B     		cmp	r3, #11
 686 0012 05D8     		bhi	.L49
 301:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 687              		.loc 1 301 5 is_stmt 1 discriminator 3 view .LVU200
 301:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 688              		.loc 1 301 23 is_stmt 0 discriminator 3 view .LVU201
 689 0014 EA18     		adds	r2, r5, r3
 690 0016 0024     		movs	r4, #0
 691 0018 1473     		strb	r4, [r2, #12]
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 692              		.loc 1 299 26 is_stmt 1 discriminator 3 view .LVU202
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 693              		.loc 1 299 27 is_stmt 0 discriminator 3 view .LVU203
 694 001a 0133     		adds	r3, r3, #1
 695              	.LVL64:
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 696              		.loc 1 299 27 discriminator 3 view .LVU204
 697 001c 9BB2     		uxth	r3, r3
 698              	.LVL65:
 299:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 699              		.loc 1 299 27 discriminator 3 view .LVU205
 700 001e F7E7     		b	.L45
 701              	.L49:
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 702              		.loc 1 304 3 is_stmt 1 view .LVU206
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 703              		.loc 1 304 35 is_stmt 0 view .LVU207
 704 0020 AF23     		movs	r3, #175
 705              	.LVL66:
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 706              		.loc 1 304 35 view .LVU208
 707 0022 9B00     		lsls	r3, r3, #2
 708 0024 F358     		ldr	r3, [r6, r3]
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 709              		.loc 1 304 47 view .LVU209
 710 0026 5B68     		ldr	r3, [r3, #4]
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 711              		.loc 1 304 8 view .LVU210
 712 0028 6A46     		mov	r2, sp
 713 002a 0632     		adds	r2, r2, #6
 714 002c 6946     		mov	r1, sp
 715              	.LVL67:
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 716              		.loc 1 304 8 view .LVU211
 717 002e 3800     		movs	r0, r7
 718              	.LVL68:
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 719              		.loc 1 304 8 view .LVU212
ARM GAS  /tmp/ccCIT76y.s 			page 23


 720 0030 9847     		blx	r3
 721              	.LVL69:
 304:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 722              		.loc 1 304 6 view .LVU213
 723 0032 0028     		cmp	r0, #0
 724 0034 19D1     		bne	.L50
 311:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[4] = (uint8_t)((blk_nbr - 1U) >> 24);
 725              		.loc 1 311 5 is_stmt 1 view .LVU214
 311:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[4] = (uint8_t)((blk_nbr - 1U) >> 24);
 726              		.loc 1 311 23 is_stmt 0 view .LVU215
 727 0036 0823     		movs	r3, #8
 728 0038 EB73     		strb	r3, [r5, #15]
 312:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)((blk_nbr - 1U) >> 16);
 729              		.loc 1 312 5 is_stmt 1 view .LVU216
 312:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)((blk_nbr - 1U) >> 16);
 730              		.loc 1 312 44 is_stmt 0 view .LVU217
 731 003a 009A     		ldr	r2, [sp]
 732 003c 531E     		subs	r3, r2, #1
 312:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)((blk_nbr - 1U) >> 16);
 733              		.loc 1 312 25 view .LVU218
 734 003e 190E     		lsrs	r1, r3, #24
 312:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)((blk_nbr - 1U) >> 16);
 735              		.loc 1 312 23 view .LVU219
 736 0040 2974     		strb	r1, [r5, #16]
 313:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[6] = (uint8_t)((blk_nbr - 1U) >>  8);
 737              		.loc 1 313 5 is_stmt 1 view .LVU220
 313:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[6] = (uint8_t)((blk_nbr - 1U) >>  8);
 738              		.loc 1 313 50 is_stmt 0 view .LVU221
 739 0042 190C     		lsrs	r1, r3, #16
 313:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[6] = (uint8_t)((blk_nbr - 1U) >>  8);
 740              		.loc 1 313 23 view .LVU222
 741 0044 6974     		strb	r1, [r5, #17]
 314:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(blk_nbr - 1U);
 742              		.loc 1 314 5 is_stmt 1 view .LVU223
 314:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(blk_nbr - 1U);
 743              		.loc 1 314 50 is_stmt 0 view .LVU224
 744 0046 1B0A     		lsrs	r3, r3, #8
 314:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(blk_nbr - 1U);
 745              		.loc 1 314 23 view .LVU225
 746 0048 AB74     		strb	r3, [r5, #18]
 315:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 747              		.loc 1 315 5 is_stmt 1 view .LVU226
 315:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 748              		.loc 1 315 25 is_stmt 0 view .LVU227
 749 004a 013A     		subs	r2, r2, #1
 315:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 750              		.loc 1 315 23 view .LVU228
 751 004c EA74     		strb	r2, [r5, #19]
 317:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[9] = (uint8_t)(blk_size >>  16);
 752              		.loc 1 317 5 is_stmt 1 view .LVU229
 317:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[9] = (uint8_t)(blk_size >>  16);
 753              		.loc 1 317 23 is_stmt 0 view .LVU230
 754 004e 0223     		movs	r3, #2
 755 0050 2B75     		strb	r3, [r5, #20]
 318:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[10] = (uint8_t)(blk_size >>  8);
 756              		.loc 1 318 5 is_stmt 1 view .LVU231
 318:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[10] = (uint8_t)(blk_size >>  8);
ARM GAS  /tmp/ccCIT76y.s 			page 24


 757              		.loc 1 318 44 is_stmt 0 view .LVU232
 758 0052 6B46     		mov	r3, sp
 759 0054 0633     		adds	r3, r3, #6
 760 0056 1B88     		ldrh	r3, [r3]
 318:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[10] = (uint8_t)(blk_size >>  8);
 761              		.loc 1 318 25 view .LVU233
 762 0058 0022     		movs	r2, #0
 318:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[10] = (uint8_t)(blk_size >>  8);
 763              		.loc 1 318 23 view .LVU234
 764 005a 6A75     		strb	r2, [r5, #21]
 319:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[11] = (uint8_t)(blk_size);
 765              		.loc 1 319 5 is_stmt 1 view .LVU235
 319:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[11] = (uint8_t)(blk_size);
 766              		.loc 1 319 26 is_stmt 0 view .LVU236
 767 005c 1A0A     		lsrs	r2, r3, #8
 319:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[11] = (uint8_t)(blk_size);
 768              		.loc 1 319 24 view .LVU237
 769 005e AA75     		strb	r2, [r5, #22]
 320:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 770              		.loc 1 320 5 is_stmt 1 view .LVU238
 320:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 771              		.loc 1 320 24 is_stmt 0 view .LVU239
 772 0060 EB75     		strb	r3, [r5, #23]
 322:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return 0;
 773              		.loc 1 322 5 is_stmt 1 view .LVU240
 322:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return 0;
 774              		.loc 1 322 27 is_stmt 0 view .LVU241
 775 0062 0C23     		movs	r3, #12
 776 0064 6B81     		strh	r3, [r5, #10]
 323:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 777              		.loc 1 323 5 is_stmt 1 view .LVU242
 778              	.L48:
 325:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 779              		.loc 1 325 1 is_stmt 0 view .LVU243
 780 0066 03B0     		add	sp, sp, #12
 781              		@ sp needed
 782              	.LVL70:
 783              	.LVL71:
 325:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 784              		.loc 1 325 1 view .LVU244
 785 0068 F0BD     		pop	{r4, r5, r6, r7, pc}
 786              	.LVL72:
 787              	.L50:
 306:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 788              		.loc 1 306 5 is_stmt 1 view .LVU245
 789 006a 3A23     		movs	r3, #58
 790 006c 0222     		movs	r2, #2
 791 006e 3900     		movs	r1, r7
 792 0070 3000     		movs	r0, r6
 793 0072 FFF7FEFF 		bl	SCSI_SenseCode
 794              	.LVL73:
 307:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 795              		.loc 1 307 5 view .LVU246
 307:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 796              		.loc 1 307 12 is_stmt 0 view .LVU247
 797 0076 0120     		movs	r0, #1
 798 0078 4042     		rsbs	r0, r0, #0
ARM GAS  /tmp/ccCIT76y.s 			page 25


 799 007a F4E7     		b	.L48
 800              		.cfi_endproc
 801              	.LFE47:
 803              		.section	.text.SCSI_ReadCapacity10,"ax",%progbits
 804              		.align	1
 805              		.syntax unified
 806              		.code	16
 807              		.thumb_func
 808              		.fpu softvfp
 810              	SCSI_ReadCapacity10:
 811              	.LVL74:
 812              	.LFB46:
 259:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 813              		.loc 1 259 1 is_stmt 1 view -0
 814              		.cfi_startproc
 815              		@ args = 0, pretend = 0, frame = 0
 816              		@ frame_needed = 0, uses_anonymous_args = 0
 259:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 817              		.loc 1 259 1 is_stmt 0 view .LVU249
 818 0000 70B5     		push	{r4, r5, r6, lr}
 819              	.LCFI6:
 820              		.cfi_def_cfa_offset 16
 821              		.cfi_offset 4, -16
 822              		.cfi_offset 5, -12
 823              		.cfi_offset 6, -8
 824              		.cfi_offset 14, -4
 825 0002 0500     		movs	r5, r0
 826 0004 0E00     		movs	r6, r1
 260:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 827              		.loc 1 260 3 is_stmt 1 view .LVU250
 260:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 828              		.loc 1 260 32 is_stmt 0 view .LVU251
 829 0006 AE23     		movs	r3, #174
 830 0008 9B00     		lsls	r3, r3, #2
 831 000a C458     		ldr	r4, [r0, r3]
 832              	.LVL75:
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 833              		.loc 1 262 3 is_stmt 1 view .LVU252
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 834              		.loc 1 262 35 is_stmt 0 view .LVU253
 835 000c 0433     		adds	r3, r3, #4
 836 000e C358     		ldr	r3, [r0, r3]
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 837              		.loc 1 262 47 view .LVU254
 838 0010 5B68     		ldr	r3, [r3, #4]
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 839              		.loc 1 262 8 view .LVU255
 840 0012 144A     		ldr	r2, .L55
 841              	.LVL76:
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 842              		.loc 1 262 8 view .LVU256
 843 0014 A218     		adds	r2, r4, r2
 844 0016 9821     		movs	r1, #152
 845              	.LVL77:
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 846              		.loc 1 262 8 view .LVU257
 847 0018 8900     		lsls	r1, r1, #2
ARM GAS  /tmp/ccCIT76y.s 			page 26


 848 001a 6118     		adds	r1, r4, r1
 849 001c 3000     		movs	r0, r6
 850              	.LVL78:
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 851              		.loc 1 262 8 view .LVU258
 852 001e 9847     		blx	r3
 853              	.LVL79:
 262:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 854              		.loc 1 262 6 view .LVU259
 855 0020 0028     		cmp	r0, #0
 856 0022 16D1     		bne	.L54
 270:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[1] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >> 16);
 857              		.loc 1 270 5 is_stmt 1 view .LVU260
 270:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[1] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >> 16);
 858              		.loc 1 270 40 is_stmt 0 view .LVU261
 859 0024 9823     		movs	r3, #152
 860 0026 9B00     		lsls	r3, r3, #2
 861 0028 E258     		ldr	r2, [r4, r3]
 270:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[1] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >> 16);
 862              		.loc 1 270 55 view .LVU262
 863 002a 531E     		subs	r3, r2, #1
 270:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[1] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >> 16);
 864              		.loc 1 270 25 view .LVU263
 865 002c 190E     		lsrs	r1, r3, #24
 270:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[1] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >> 16);
 866              		.loc 1 270 23 view .LVU264
 867 002e 2173     		strb	r1, [r4, #12]
 271:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[2] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >>  8);
 868              		.loc 1 271 5 is_stmt 1 view .LVU265
 271:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[2] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >>  8);
 869              		.loc 1 271 61 is_stmt 0 view .LVU266
 870 0030 190C     		lsrs	r1, r3, #16
 271:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[2] = (uint8_t)((hmsc->scsi_blk_nbr - 1U) >>  8);
 871              		.loc 1 271 23 view .LVU267
 872 0032 6173     		strb	r1, [r4, #13]
 272:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[3] = (uint8_t)(hmsc->scsi_blk_nbr - 1U);
 873              		.loc 1 272 5 is_stmt 1 view .LVU268
 272:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[3] = (uint8_t)(hmsc->scsi_blk_nbr - 1U);
 874              		.loc 1 272 61 is_stmt 0 view .LVU269
 875 0034 1B0A     		lsrs	r3, r3, #8
 272:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[3] = (uint8_t)(hmsc->scsi_blk_nbr - 1U);
 876              		.loc 1 272 23 view .LVU270
 877 0036 A373     		strb	r3, [r4, #14]
 273:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 878              		.loc 1 273 5 is_stmt 1 view .LVU271
 273:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 879              		.loc 1 273 25 is_stmt 0 view .LVU272
 880 0038 013A     		subs	r2, r2, #1
 273:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 881              		.loc 1 273 23 view .LVU273
 882 003a E273     		strb	r2, [r4, #15]
 275:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)(hmsc->scsi_blk_size >>  16);
 883              		.loc 1 275 5 is_stmt 1 view .LVU274
 275:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)(hmsc->scsi_blk_size >>  16);
 884              		.loc 1 275 39 is_stmt 0 view .LVU275
 885 003c 094B     		ldr	r3, .L55
 886 003e E35A     		ldrh	r3, [r4, r3]
ARM GAS  /tmp/ccCIT76y.s 			page 27


 275:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)(hmsc->scsi_blk_size >>  16);
 887              		.loc 1 275 25 view .LVU276
 888 0040 0022     		movs	r2, #0
 275:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[5] = (uint8_t)(hmsc->scsi_blk_size >>  16);
 889              		.loc 1 275 23 view .LVU277
 890 0042 2274     		strb	r2, [r4, #16]
 276:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[6] = (uint8_t)(hmsc->scsi_blk_size >>  8);
 891              		.loc 1 276 5 is_stmt 1 view .LVU278
 276:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[6] = (uint8_t)(hmsc->scsi_blk_size >>  8);
 892              		.loc 1 276 23 is_stmt 0 view .LVU279
 893 0044 6274     		strb	r2, [r4, #17]
 277:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(hmsc->scsi_blk_size);
 894              		.loc 1 277 5 is_stmt 1 view .LVU280
 277:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(hmsc->scsi_blk_size);
 895              		.loc 1 277 25 is_stmt 0 view .LVU281
 896 0046 1A0A     		lsrs	r2, r3, #8
 277:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_data[7] = (uint8_t)(hmsc->scsi_blk_size);
 897              		.loc 1 277 23 view .LVU282
 898 0048 A274     		strb	r2, [r4, #18]
 278:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 899              		.loc 1 278 5 is_stmt 1 view .LVU283
 278:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 900              		.loc 1 278 23 is_stmt 0 view .LVU284
 901 004a E374     		strb	r3, [r4, #19]
 280:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return 0;
 902              		.loc 1 280 5 is_stmt 1 view .LVU285
 280:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return 0;
 903              		.loc 1 280 27 is_stmt 0 view .LVU286
 904 004c 0823     		movs	r3, #8
 905 004e 6381     		strh	r3, [r4, #10]
 281:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 906              		.loc 1 281 5 is_stmt 1 view .LVU287
 907              	.L53:
 283:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 908              		.loc 1 283 1 is_stmt 0 view .LVU288
 909              		@ sp needed
 910              	.LVL80:
 911              	.LVL81:
 283:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 912              		.loc 1 283 1 view .LVU289
 913 0050 70BD     		pop	{r4, r5, r6, pc}
 914              	.LVL82:
 915              	.L54:
 264:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 916              		.loc 1 264 5 is_stmt 1 view .LVU290
 917 0052 3A23     		movs	r3, #58
 918 0054 0222     		movs	r2, #2
 919 0056 3100     		movs	r1, r6
 920 0058 2800     		movs	r0, r5
 921 005a FFF7FEFF 		bl	SCSI_SenseCode
 922              	.LVL83:
 265:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 923              		.loc 1 265 5 view .LVU291
 265:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 924              		.loc 1 265 12 is_stmt 0 view .LVU292
 925 005e 0120     		movs	r0, #1
 926 0060 4042     		rsbs	r0, r0, #0
ARM GAS  /tmp/ccCIT76y.s 			page 28


 927 0062 F5E7     		b	.L53
 928              	.L56:
 929              		.align	2
 930              	.L55:
 931 0064 5E020000 		.word	606
 932              		.cfi_endproc
 933              	.LFE46:
 935              		.section	.text.SCSI_CheckAddressRange,"ax",%progbits
 936              		.align	1
 937              		.syntax unified
 938              		.code	16
 939              		.thumb_func
 940              		.fpu softvfp
 942              	SCSI_CheckAddressRange:
 943              	.LVL84:
 944              	.LFB56:
 447:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 448:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 449:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_Read10
 450:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Read10 command
 451:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 452:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 453:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 454:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 455:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_Read10(USBD_HandleTypeDef *pdev, uint8_t lun, uint8_t *params)
 456:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 457:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 458:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 459:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->bot_state == USBD_BOT_IDLE) /* Idle */
 460:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 461:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* case 10 : Ho <> Di */
 462:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if ((hmsc->cbw.bmFlags & 0x80U) != 0x80U)
 463:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 464:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, hmsc->cbw.bLUN, ILLEGAL_REQUEST, INVALID_CDB);
 465:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 466:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 467:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 468:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (((USBD_StorageTypeDef *)pdev->pUserData)->IsReady(lun) != 0)
 469:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 470:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, lun, NOT_READY, MEDIUM_NOT_PRESENT);
 471:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 472:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 473:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 474:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->scsi_blk_addr = ((uint32_t)params[2] << 24) |
 475:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 476:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] <<  8) |
 477:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 478:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 479:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->scsi_blk_len = ((uint32_t)params[7] <<  8) | (uint32_t)params[8];
 480:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 481:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (SCSI_CheckAddressRange(pdev, lun, hmsc->scsi_blk_addr,
 482:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 483:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 484:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1; /* error */
 485:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 486:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 487:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_state = USBD_BOT_DATA_IN;
ARM GAS  /tmp/ccCIT76y.s 			page 29


 488:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 489:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* cases 4,5 : Hi <> Dn */
 490:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (hmsc->cbw.dDataLength != (hmsc->scsi_blk_len * hmsc->scsi_blk_size))
 491:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 492:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, hmsc->cbw.bLUN, ILLEGAL_REQUEST, INVALID_CDB);
 493:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 494:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 495:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 496:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data_length = MSC_MEDIA_PACKET;
 497:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 498:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return SCSI_ProcessRead(pdev, lun);
 499:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 500:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 501:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 502:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_Write10
 503:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Write10 command
 504:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 505:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 506:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 507:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 508:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 509:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_Write10(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 510:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 511:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 512:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint32_t len;
 513:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 514:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->bot_state == USBD_BOT_IDLE) /* Idle */
 515:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 516:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* case 8 : Hi <> Do */
 517:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if ((hmsc->cbw.bmFlags & 0x80U) == 0x80U)
 518:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 519:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, hmsc->cbw.bLUN, ILLEGAL_REQUEST, INVALID_CDB);
 520:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 521:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 522:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 523:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* Check whether Media is ready */
 524:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (((USBD_StorageTypeDef *)pdev->pUserData)->IsReady(lun) != 0)
 525:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 526:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, lun, NOT_READY, MEDIUM_NOT_PRESENT);
 527:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 528:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 529:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 530:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* Check If media is write-protected */
 531:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (((USBD_StorageTypeDef *)pdev->pUserData)->IsWriteProtected(lun) != 0)
 532:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 533:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, lun, NOT_READY, WRITE_PROTECTED);
 534:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 535:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 536:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 537:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->scsi_blk_addr = ((uint32_t)params[2] << 24) |
 538:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 539:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] << 8) |
 540:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 541:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 542:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->scsi_blk_len = ((uint32_t)params[7] << 8) |
 543:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                          (uint32_t)params[8];
 544:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
ARM GAS  /tmp/ccCIT76y.s 			page 30


 545:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* check if LBA address is in the right range */
 546:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (SCSI_CheckAddressRange(pdev, lun, hmsc->scsi_blk_addr,
 547:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 548:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 549:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1; /* error */
 550:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 551:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 552:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = hmsc->scsi_blk_len * hmsc->scsi_blk_size;
 553:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 554:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* cases 3,11,13 : Hn,Ho <> D0 */
 555:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     if (hmsc->cbw.dDataLength != len)
 556:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 557:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       SCSI_SenseCode(pdev, hmsc->cbw.bLUN, ILLEGAL_REQUEST, INVALID_CDB);
 558:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 559:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 560:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 561:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = MIN(len, MSC_MEDIA_PACKET);
 562:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 563:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* Prepare EP to receive first data packet */
 564:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_state = USBD_BOT_DATA_OUT;
 565:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     USBD_LL_PrepareReceive(pdev, MSC_EPOUT_ADDR, hmsc->bot_data, len);
 566:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 567:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   else /* Write Process ongoing */
 568:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 569:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return SCSI_ProcessWrite(pdev, lun);
 570:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 571:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 572:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 573:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 574:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 575:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 576:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_Verify10
 577:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Process Verify10 command
 578:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 579:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  params: Command parameters
 580:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 581:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 582:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 583:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_Verify10(USBD_HandleTypeDef  *pdev, uint8_t lun, uint8_t *params)
 584:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 585:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 586:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 587:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if ((params[1] & 0x02U) == 0x02U)
 588:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 589:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, lun, ILLEGAL_REQUEST, INVALID_FIELED_IN_COMMAND);
 590:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1; /* Error, Verify Mode Not supported*/
 591:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 592:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 593:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (SCSI_CheckAddressRange(pdev, lun, hmsc->scsi_blk_addr,
 594:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                              hmsc->scsi_blk_len) < 0)
 595:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 596:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1; /* error */
 597:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 598:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->bot_data_length = 0U;
 599:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 600:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 601:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
ARM GAS  /tmp/ccCIT76y.s 			page 31


 602:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 603:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_CheckAddressRange
 604:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Check address range
 605:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 606:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  blk_offset: first block address
 607:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  blk_nbr: number of block to be processed
 608:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 609:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 610:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_CheckAddressRange(USBD_HandleTypeDef *pdev, uint8_t lun,
 611:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                      uint32_t blk_offset, uint32_t blk_nbr)
 612:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 945              		.loc 1 612 1 is_stmt 1 view -0
 946              		.cfi_startproc
 947              		@ args = 0, pretend = 0, frame = 0
 948              		@ frame_needed = 0, uses_anonymous_args = 0
 949              		.loc 1 612 1 is_stmt 0 view .LVU294
 950 0000 10B5     		push	{r4, lr}
 951              	.LCFI7:
 952              		.cfi_def_cfa_offset 8
 953              		.cfi_offset 4, -8
 954              		.cfi_offset 14, -4
 613:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 955              		.loc 1 613 3 is_stmt 1 view .LVU295
 956              		.loc 1 613 32 is_stmt 0 view .LVU296
 957 0002 AE24     		movs	r4, #174
 958 0004 A400     		lsls	r4, r4, #2
 959 0006 0459     		ldr	r4, [r0, r4]
 960              	.LVL85:
 614:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 615:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if ((blk_offset + blk_nbr) > hmsc->scsi_blk_nbr)
 961              		.loc 1 615 3 is_stmt 1 view .LVU297
 962              		.loc 1 615 19 is_stmt 0 view .LVU298
 963 0008 D218     		adds	r2, r2, r3
 964              	.LVL86:
 965              		.loc 1 615 36 view .LVU299
 966 000a 9823     		movs	r3, #152
 967              	.LVL87:
 968              		.loc 1 615 36 view .LVU300
 969 000c 9B00     		lsls	r3, r3, #2
 970 000e E358     		ldr	r3, [r4, r3]
 971              		.loc 1 615 6 view .LVU301
 972 0010 9A42     		cmp	r2, r3
 973 0012 01D8     		bhi	.L60
 616:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 617:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, lun, ILLEGAL_REQUEST, ADDRESS_OUT_OF_RANGE);
 618:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 619:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 620:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 974              		.loc 1 620 10 view .LVU302
 975 0014 0020     		movs	r0, #0
 976              	.LVL88:
 977              	.L58:
 621:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 978              		.loc 1 621 1 view .LVU303
 979              		@ sp needed
 980              	.LVL89:
 981              		.loc 1 621 1 view .LVU304
ARM GAS  /tmp/ccCIT76y.s 			page 32


 982 0016 10BD     		pop	{r4, pc}
 983              	.LVL90:
 984              	.L60:
 617:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 985              		.loc 1 617 5 is_stmt 1 view .LVU305
 986 0018 2123     		movs	r3, #33
 987 001a 0522     		movs	r2, #5
 988 001c FFF7FEFF 		bl	SCSI_SenseCode
 989              	.LVL91:
 618:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 990              		.loc 1 618 5 view .LVU306
 618:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 991              		.loc 1 618 12 is_stmt 0 view .LVU307
 992 0020 0120     		movs	r0, #1
 993 0022 4042     		rsbs	r0, r0, #0
 994 0024 F7E7     		b	.L58
 995              		.cfi_endproc
 996              	.LFE56:
 998              		.global	__aeabi_uidiv
 999              		.section	.text.SCSI_ProcessRead,"ax",%progbits
 1000              		.align	1
 1001              		.syntax unified
 1002              		.code	16
 1003              		.thumb_func
 1004              		.fpu softvfp
 1006              	SCSI_ProcessRead:
 1007              	.LVL92:
 1008              	.LFB57:
 622:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 623:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 624:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_ProcessRead
 625:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Handle Read Process
 626:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 627:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 628:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
 629:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ProcessRead(USBD_HandleTypeDef  *pdev, uint8_t lun)
 630:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 1009              		.loc 1 630 1 is_stmt 1 view -0
 1010              		.cfi_startproc
 1011              		@ args = 0, pretend = 0, frame = 0
 1012              		@ frame_needed = 0, uses_anonymous_args = 0
 1013              		.loc 1 630 1 is_stmt 0 view .LVU309
 1014 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1015              	.LCFI8:
 1016              		.cfi_def_cfa_offset 24
 1017              		.cfi_offset 3, -24
 1018              		.cfi_offset 4, -20
 1019              		.cfi_offset 5, -16
 1020              		.cfi_offset 6, -12
 1021              		.cfi_offset 7, -8
 1022              		.cfi_offset 14, -4
 1023 0002 CE46     		mov	lr, r9
 1024 0004 4746     		mov	r7, r8
 1025 0006 80B5     		push	{r7, lr}
 1026              	.LCFI9:
 1027              		.cfi_def_cfa_offset 32
 1028              		.cfi_offset 8, -32
ARM GAS  /tmp/ccCIT76y.s 			page 33


 1029              		.cfi_offset 9, -28
 1030 0008 0600     		movs	r6, r0
 1031 000a 8846     		mov	r8, r1
 631:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef *hmsc = (USBD_MSC_BOT_HandleTypeDef *)pdev->pClassData;
 1032              		.loc 1 631 3 is_stmt 1 view .LVU310
 1033              		.loc 1 631 31 is_stmt 0 view .LVU311
 1034 000c AE23     		movs	r3, #174
 1035 000e 9B00     		lsls	r3, r3, #2
 1036 0010 C458     		ldr	r4, [r0, r3]
 1037              	.LVL93:
 632:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint32_t len = hmsc->scsi_blk_len * hmsc->scsi_blk_size;
 1038              		.loc 1 632 3 is_stmt 1 view .LVU312
 1039              		.loc 1 632 22 is_stmt 0 view .LVU313
 1040 0012 503B     		subs	r3, r3, #80
 1041 0014 E558     		ldr	r5, [r4, r3]
 1042              		.loc 1 632 43 view .LVU314
 1043 0016 234B     		ldr	r3, .L67
 1044 0018 E15A     		ldrh	r1, [r4, r3]
 1045              	.LVL94:
 1046              		.loc 1 632 12 view .LVU315
 1047 001a 4D43     		muls	r5, r1
 633:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 634:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   len = MIN(len, MSC_MEDIA_PACKET);
 1048              		.loc 1 634 3 is_stmt 1 view .LVU316
 1049              		.loc 1 634 7 is_stmt 0 view .LVU317
 1050 001c 5E3B     		subs	r3, r3, #94
 1051 001e 9D42     		cmp	r5, r3
 1052 0020 00D9     		bls	.L62
 1053 0022 1D00     		movs	r5, r3
 1054              	.L62:
 1055              	.LVL95:
 635:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 636:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (((USBD_StorageTypeDef *)pdev->pUserData)->Read(lun,
 1056              		.loc 1 636 3 is_stmt 1 view .LVU318
 1057              		.loc 1 636 35 is_stmt 0 view .LVU319
 1058 0024 AF23     		movs	r3, #175
 1059 0026 9B00     		lsls	r3, r3, #2
 1060 0028 F358     		ldr	r3, [r6, r3]
 1061              		.loc 1 636 47 view .LVU320
 1062 002a 1B69     		ldr	r3, [r3, #16]
 1063 002c 9946     		mov	r9, r3
 637:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                      hmsc->bot_data,
 1064              		.loc 1 637 58 view .LVU321
 1065 002e 2700     		movs	r7, r4
 1066 0030 0C37     		adds	r7, r7, #12
 638:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                      hmsc->scsi_blk_addr,
 639:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                      (len / hmsc->scsi_blk_size)) < 0)
 1067              		.loc 1 639 59 view .LVU322
 1068 0032 2800     		movs	r0, r5
 1069              	.LVL96:
 1070              		.loc 1 639 59 view .LVU323
 1071 0034 FFF7FEFF 		bl	__aeabi_uidiv
 1072              	.LVL97:
 636:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                      hmsc->bot_data,
 1073              		.loc 1 636 8 view .LVU324
 1074 0038 83B2     		uxth	r3, r0
 1075 003a 9922     		movs	r2, #153
ARM GAS  /tmp/ccCIT76y.s 			page 34


 1076 003c 9200     		lsls	r2, r2, #2
 1077 003e A258     		ldr	r2, [r4, r2]
 1078 0040 3900     		movs	r1, r7
 1079 0042 4046     		mov	r0, r8
 1080 0044 C847     		blx	r9
 1081              	.LVL98:
 636:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                      hmsc->bot_data,
 1082              		.loc 1 636 6 view .LVU325
 1083 0046 0028     		cmp	r0, #0
 1084 0048 1DDB     		blt	.L66
 640:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 641:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, lun, HARDWARE_ERROR, UNRECOVERED_READ_ERROR);
 642:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 643:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 644:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 645:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_LL_Transmit(pdev, MSC_EPIN_ADDR, hmsc->bot_data, len);
 1085              		.loc 1 645 3 is_stmt 1 view .LVU326
 1086 004a ABB2     		uxth	r3, r5
 1087 004c 3A00     		movs	r2, r7
 1088 004e 8121     		movs	r1, #129
 1089 0050 3000     		movs	r0, r6
 1090 0052 FFF7FEFF 		bl	USBD_LL_Transmit
 1091              	.LVL99:
 646:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 647:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_blk_addr += (len / hmsc->scsi_blk_size);
 1092              		.loc 1 647 3 view .LVU327
 1093              		.loc 1 647 37 is_stmt 0 view .LVU328
 1094 0056 134B     		ldr	r3, .L67
 1095 0058 E15A     		ldrh	r1, [r4, r3]
 1096              		.loc 1 647 31 view .LVU329
 1097 005a 2800     		movs	r0, r5
 1098 005c FFF7FEFF 		bl	__aeabi_uidiv
 1099              	.LVL100:
 1100              		.loc 1 647 23 view .LVU330
 1101 0060 9922     		movs	r2, #153
 1102 0062 9200     		lsls	r2, r2, #2
 1103 0064 A358     		ldr	r3, [r4, r2]
 1104 0066 1B18     		adds	r3, r3, r0
 1105 0068 A350     		str	r3, [r4, r2]
 648:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_blk_len -= (len / hmsc->scsi_blk_size);
 1106              		.loc 1 648 3 is_stmt 1 view .LVU331
 1107              		.loc 1 648 22 is_stmt 0 view .LVU332
 1108 006a 9A23     		movs	r3, #154
 1109 006c 9B00     		lsls	r3, r3, #2
 1110 006e E258     		ldr	r2, [r4, r3]
 1111 0070 101A     		subs	r0, r2, r0
 1112 0072 E050     		str	r0, [r4, r3]
 649:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 650:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   /* case 6 : Hi = Di */
 651:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->csw.dDataResidue -= len;
 1113              		.loc 1 651 3 is_stmt 1 view .LVU333
 1114              		.loc 1 651 26 is_stmt 0 view .LVU334
 1115 0074 343B     		subs	r3, r3, #52
 1116 0076 E258     		ldr	r2, [r4, r3]
 1117 0078 551B     		subs	r5, r2, r5
 1118              	.LVL101:
 1119              		.loc 1 651 26 view .LVU335
ARM GAS  /tmp/ccCIT76y.s 			page 35


 1120 007a E550     		str	r5, [r4, r3]
 652:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 653:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->scsi_blk_len == 0U)
 1121              		.loc 1 653 3 is_stmt 1 view .LVU336
 1122              		.loc 1 653 6 is_stmt 0 view .LVU337
 1123 007c 0028     		cmp	r0, #0
 1124 007e 0BD1     		bne	.L65
 654:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 655:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     hmsc->bot_state = USBD_BOT_LAST_DATA_IN;
 1125              		.loc 1 655 5 is_stmt 1 view .LVU338
 1126              		.loc 1 655 21 is_stmt 0 view .LVU339
 1127 0080 0323     		movs	r3, #3
 1128 0082 2372     		strb	r3, [r4, #8]
 1129 0084 09E0     		b	.L64
 1130              	.LVL102:
 1131              	.L66:
 641:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 1132              		.loc 1 641 5 is_stmt 1 view .LVU340
 1133 0086 1123     		movs	r3, #17
 1134 0088 0422     		movs	r2, #4
 1135 008a 4146     		mov	r1, r8
 1136 008c 3000     		movs	r0, r6
 1137 008e FFF7FEFF 		bl	SCSI_SenseCode
 1138              	.LVL103:
 642:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1139              		.loc 1 642 5 view .LVU341
 642:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1140              		.loc 1 642 12 is_stmt 0 view .LVU342
 1141 0092 0120     		movs	r0, #1
 1142 0094 4042     		rsbs	r0, r0, #0
 1143 0096 00E0     		b	.L64
 1144              	.LVL104:
 1145              	.L65:
 656:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 657:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 1146              		.loc 1 657 10 view .LVU343
 1147 0098 0020     		movs	r0, #0
 1148              	.L64:
 658:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 1149              		.loc 1 658 1 view .LVU344
 1150              		@ sp needed
 1151              	.LVL105:
 1152              	.LVL106:
 1153              	.LVL107:
 1154              		.loc 1 658 1 view .LVU345
 1155 009a 0CBC     		pop	{r2, r3}
 1156 009c 9046     		mov	r8, r2
 1157 009e 9946     		mov	r9, r3
 1158 00a0 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1159              	.L68:
 1160 00a2 C046     		.align	2
 1161              	.L67:
 1162 00a4 5E020000 		.word	606
 1163              		.cfi_endproc
 1164              	.LFE57:
 1166              		.section	.text.SCSI_Read10,"ax",%progbits
 1167              		.align	1
ARM GAS  /tmp/ccCIT76y.s 			page 36


 1168              		.syntax unified
 1169              		.code	16
 1170              		.thumb_func
 1171              		.fpu softvfp
 1173              	SCSI_Read10:
 1174              	.LVL108:
 1175              	.LFB53:
 456:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 1176              		.loc 1 456 1 is_stmt 1 view -0
 1177              		.cfi_startproc
 1178              		@ args = 0, pretend = 0, frame = 0
 1179              		@ frame_needed = 0, uses_anonymous_args = 0
 456:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 1180              		.loc 1 456 1 is_stmt 0 view .LVU347
 1181 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1182              	.LCFI10:
 1183              		.cfi_def_cfa_offset 24
 1184              		.cfi_offset 3, -24
 1185              		.cfi_offset 4, -20
 1186              		.cfi_offset 5, -16
 1187              		.cfi_offset 6, -12
 1188              		.cfi_offset 7, -8
 1189              		.cfi_offset 14, -4
 1190 0002 0600     		movs	r6, r0
 1191 0004 0F00     		movs	r7, r1
 1192 0006 1500     		movs	r5, r2
 457:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1193              		.loc 1 457 3 is_stmt 1 view .LVU348
 457:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1194              		.loc 1 457 32 is_stmt 0 view .LVU349
 1195 0008 AE23     		movs	r3, #174
 1196 000a 9B00     		lsls	r3, r3, #2
 1197 000c C458     		ldr	r4, [r0, r3]
 1198              	.LVL109:
 459:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1199              		.loc 1 459 3 is_stmt 1 view .LVU350
 459:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1200              		.loc 1 459 11 is_stmt 0 view .LVU351
 1201 000e 237A     		ldrb	r3, [r4, #8]
 459:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1202              		.loc 1 459 6 view .LVU352
 1203 0010 002B     		cmp	r3, #0
 1204 0012 32D1     		bne	.L70
 462:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1205              		.loc 1 462 5 is_stmt 1 view .LVU353
 462:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1206              		.loc 1 462 37 is_stmt 0 view .LVU354
 1207 0014 8623     		movs	r3, #134
 1208 0016 9B00     		lsls	r3, r3, #2
 1209 0018 E356     		ldrsb	r3, [r4, r3]
 462:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1210              		.loc 1 462 8 view .LVU355
 1211 001a 002B     		cmp	r3, #0
 1212 001c 35DA     		bge	.L75
 468:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1213              		.loc 1 468 5 is_stmt 1 view .LVU356
 468:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
ARM GAS  /tmp/ccCIT76y.s 			page 37


 1214              		.loc 1 468 37 is_stmt 0 view .LVU357
 1215 001e AF23     		movs	r3, #175
 1216 0020 9B00     		lsls	r3, r3, #2
 1217 0022 C358     		ldr	r3, [r0, r3]
 468:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1218              		.loc 1 468 49 view .LVU358
 1219 0024 9B68     		ldr	r3, [r3, #8]
 468:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1220              		.loc 1 468 10 view .LVU359
 1221 0026 0800     		movs	r0, r1
 1222              	.LVL110:
 468:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1223              		.loc 1 468 10 view .LVU360
 1224 0028 9847     		blx	r3
 1225              	.LVL111:
 468:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1226              		.loc 1 468 8 view .LVU361
 1227 002a 0028     		cmp	r0, #0
 1228 002c 37D1     		bne	.L76
 474:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1229              		.loc 1 474 5 is_stmt 1 view .LVU362
 474:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1230              		.loc 1 474 44 is_stmt 0 view .LVU363
 1231 002e AA78     		ldrb	r2, [r5, #2]
 474:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1232              		.loc 1 474 48 view .LVU364
 1233 0030 1206     		lsls	r2, r2, #24
 475:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] <<  8) |
 1234              		.loc 1 475 44 view .LVU365
 1235 0032 EB78     		ldrb	r3, [r5, #3]
 475:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] <<  8) |
 1236              		.loc 1 475 48 view .LVU366
 1237 0034 1B04     		lsls	r3, r3, #16
 474:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1238              		.loc 1 474 55 view .LVU367
 1239 0036 1A43     		orrs	r2, r3
 476:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 1240              		.loc 1 476 44 view .LVU368
 1241 0038 2B79     		ldrb	r3, [r5, #4]
 476:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 1242              		.loc 1 476 48 view .LVU369
 1243 003a 1B02     		lsls	r3, r3, #8
 475:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] <<  8) |
 1244              		.loc 1 475 55 view .LVU370
 1245 003c 1A43     		orrs	r2, r3
 477:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1246              		.loc 1 477 43 view .LVU371
 1247 003e 6B79     		ldrb	r3, [r5, #5]
 476:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 1248              		.loc 1 476 55 view .LVU372
 1249 0040 1A43     		orrs	r2, r3
 474:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1250              		.loc 1 474 25 view .LVU373
 1251 0042 9923     		movs	r3, #153
 1252 0044 9B00     		lsls	r3, r3, #2
 1253 0046 E250     		str	r2, [r4, r3]
 479:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
ARM GAS  /tmp/ccCIT76y.s 			page 38


 1254              		.loc 1 479 5 is_stmt 1 view .LVU374
 479:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1255              		.loc 1 479 43 is_stmt 0 view .LVU375
 1256 0048 EB79     		ldrb	r3, [r5, #7]
 479:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1257              		.loc 1 479 47 view .LVU376
 1258 004a 1B02     		lsls	r3, r3, #8
 479:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1259              		.loc 1 479 72 view .LVU377
 1260 004c 297A     		ldrb	r1, [r5, #8]
 479:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1261              		.loc 1 479 54 view .LVU378
 1262 004e 0B43     		orrs	r3, r1
 479:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1263              		.loc 1 479 24 view .LVU379
 1264 0050 9A21     		movs	r1, #154
 1265 0052 8900     		lsls	r1, r1, #2
 1266 0054 6350     		str	r3, [r4, r1]
 481:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 1267              		.loc 1 481 5 is_stmt 1 view .LVU380
 481:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 1268              		.loc 1 481 9 is_stmt 0 view .LVU381
 1269 0056 3900     		movs	r1, r7
 1270 0058 3000     		movs	r0, r6
 1271 005a FFF7FEFF 		bl	SCSI_CheckAddressRange
 1272              	.LVL112:
 481:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 1273              		.loc 1 481 8 view .LVU382
 1274 005e 0028     		cmp	r0, #0
 1275 0060 31DB     		blt	.L74
 487:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1276              		.loc 1 487 5 is_stmt 1 view .LVU383
 487:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1277              		.loc 1 487 21 is_stmt 0 view .LVU384
 1278 0062 0223     		movs	r3, #2
 1279 0064 2372     		strb	r3, [r4, #8]
 490:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1280              		.loc 1 490 5 is_stmt 1 view .LVU385
 490:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1281              		.loc 1 490 18 is_stmt 0 view .LVU386
 1282 0066 8523     		movs	r3, #133
 1283 0068 9B00     		lsls	r3, r3, #2
 1284 006a E258     		ldr	r2, [r4, r3]
 490:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1285              		.loc 1 490 39 view .LVU387
 1286 006c 5433     		adds	r3, r3, #84
 1287 006e E158     		ldr	r1, [r4, r3]
 490:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1288              		.loc 1 490 60 view .LVU388
 1289 0070 164B     		ldr	r3, .L78
 1290 0072 E35A     		ldrh	r3, [r4, r3]
 490:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1291              		.loc 1 490 54 view .LVU389
 1292 0074 4B43     		muls	r3, r1
 490:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1293              		.loc 1 490 8 view .LVU390
 1294 0076 9A42     		cmp	r2, r3
ARM GAS  /tmp/ccCIT76y.s 			page 39


 1295 0078 1AD1     		bne	.L77
 1296              	.L70:
 496:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1297              		.loc 1 496 3 is_stmt 1 view .LVU391
 496:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1298              		.loc 1 496 25 is_stmt 0 view .LVU392
 1299 007a 8023     		movs	r3, #128
 1300 007c 9B00     		lsls	r3, r3, #2
 1301 007e 6381     		strh	r3, [r4, #10]
 498:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 1302              		.loc 1 498 3 is_stmt 1 view .LVU393
 498:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 1303              		.loc 1 498 10 is_stmt 0 view .LVU394
 1304 0080 3900     		movs	r1, r7
 1305 0082 3000     		movs	r0, r6
 1306 0084 FFF7FEFF 		bl	SCSI_ProcessRead
 1307              	.LVL113:
 1308              	.L72:
 499:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1309              		.loc 1 499 1 view .LVU395
 1310              		@ sp needed
 1311              	.LVL114:
 1312              	.LVL115:
 1313              	.LVL116:
 499:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1314              		.loc 1 499 1 view .LVU396
 1315 0088 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1316              	.LVL117:
 1317              	.L75:
 464:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1318              		.loc 1 464 7 is_stmt 1 view .LVU397
 1319 008a 114B     		ldr	r3, .L78+4
 1320 008c E15C     		ldrb	r1, [r4, r3]
 1321              	.LVL118:
 464:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1322              		.loc 1 464 7 is_stmt 0 view .LVU398
 1323 008e FA3B     		subs	r3, r3, #250
 1324 0090 FF3B     		subs	r3, r3, #255
 1325 0092 0522     		movs	r2, #5
 1326              	.LVL119:
 464:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1327              		.loc 1 464 7 view .LVU399
 1328 0094 FFF7FEFF 		bl	SCSI_SenseCode
 1329              	.LVL120:
 465:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1330              		.loc 1 465 7 is_stmt 1 view .LVU400
 465:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1331              		.loc 1 465 14 is_stmt 0 view .LVU401
 1332 0098 0120     		movs	r0, #1
 1333 009a 4042     		rsbs	r0, r0, #0
 1334 009c F4E7     		b	.L72
 1335              	.L76:
 470:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1336              		.loc 1 470 7 is_stmt 1 view .LVU402
 1337 009e 3A23     		movs	r3, #58
 1338 00a0 0222     		movs	r2, #2
 1339 00a2 3900     		movs	r1, r7
ARM GAS  /tmp/ccCIT76y.s 			page 40


 1340 00a4 3000     		movs	r0, r6
 1341 00a6 FFF7FEFF 		bl	SCSI_SenseCode
 1342              	.LVL121:
 471:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1343              		.loc 1 471 7 view .LVU403
 471:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1344              		.loc 1 471 14 is_stmt 0 view .LVU404
 1345 00aa 0120     		movs	r0, #1
 1346 00ac 4042     		rsbs	r0, r0, #0
 1347 00ae EBE7     		b	.L72
 1348              	.L77:
 492:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1349              		.loc 1 492 7 is_stmt 1 view .LVU405
 1350 00b0 074B     		ldr	r3, .L78+4
 1351 00b2 E15C     		ldrb	r1, [r4, r3]
 1352 00b4 FA3B     		subs	r3, r3, #250
 1353 00b6 FF3B     		subs	r3, r3, #255
 1354 00b8 0522     		movs	r2, #5
 1355 00ba 3000     		movs	r0, r6
 1356 00bc FFF7FEFF 		bl	SCSI_SenseCode
 1357              	.LVL122:
 493:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1358              		.loc 1 493 7 view .LVU406
 493:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1359              		.loc 1 493 14 is_stmt 0 view .LVU407
 1360 00c0 0120     		movs	r0, #1
 1361 00c2 4042     		rsbs	r0, r0, #0
 1362 00c4 E0E7     		b	.L72
 1363              	.L74:
 484:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1364              		.loc 1 484 14 view .LVU408
 1365 00c6 0120     		movs	r0, #1
 1366 00c8 4042     		rsbs	r0, r0, #0
 1367 00ca DDE7     		b	.L72
 1368              	.L79:
 1369              		.align	2
 1370              	.L78:
 1371 00cc 5E020000 		.word	606
 1372 00d0 19020000 		.word	537
 1373              		.cfi_endproc
 1374              	.LFE53:
 1376              		.section	.text.SCSI_ProcessWrite,"ax",%progbits
 1377              		.align	1
 1378              		.syntax unified
 1379              		.code	16
 1380              		.thumb_func
 1381              		.fpu softvfp
 1383              	SCSI_ProcessWrite:
 1384              	.LVL123:
 1385              	.LFB58:
 659:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 660:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** /**
 661:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @brief  SCSI_ProcessWrite
 662:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** *         Handle Write Process
 663:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @param  lun: Logical unit number
 664:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** * @retval status
 665:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** */
ARM GAS  /tmp/ccCIT76y.s 			page 41


 666:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 667:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** static int8_t SCSI_ProcessWrite(USBD_HandleTypeDef  *pdev, uint8_t lun)
 668:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** {
 1386              		.loc 1 668 1 is_stmt 1 view -0
 1387              		.cfi_startproc
 1388              		@ args = 0, pretend = 0, frame = 0
 1389              		@ frame_needed = 0, uses_anonymous_args = 0
 1390              		.loc 1 668 1 is_stmt 0 view .LVU410
 1391 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1392              	.LCFI11:
 1393              		.cfi_def_cfa_offset 24
 1394              		.cfi_offset 3, -24
 1395              		.cfi_offset 4, -20
 1396              		.cfi_offset 5, -16
 1397              		.cfi_offset 6, -12
 1398              		.cfi_offset 7, -8
 1399              		.cfi_offset 14, -4
 1400 0002 CE46     		mov	lr, r9
 1401 0004 4746     		mov	r7, r8
 1402 0006 80B5     		push	{r7, lr}
 1403              	.LCFI12:
 1404              		.cfi_def_cfa_offset 32
 1405              		.cfi_offset 8, -32
 1406              		.cfi_offset 9, -28
 1407 0008 0600     		movs	r6, r0
 1408 000a 8846     		mov	r8, r1
 669:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 1409              		.loc 1 669 3 is_stmt 1 view .LVU411
 1410              		.loc 1 669 31 is_stmt 0 view .LVU412
 1411 000c AE23     		movs	r3, #174
 1412 000e 9B00     		lsls	r3, r3, #2
 1413 0010 C458     		ldr	r4, [r0, r3]
 1414              	.LVL124:
 670:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint32_t len = hmsc->scsi_blk_len * hmsc->scsi_blk_size;
 1415              		.loc 1 670 3 is_stmt 1 view .LVU413
 1416              		.loc 1 670 22 is_stmt 0 view .LVU414
 1417 0012 503B     		subs	r3, r3, #80
 1418 0014 E558     		ldr	r5, [r4, r3]
 1419              		.loc 1 670 43 view .LVU415
 1420 0016 284B     		ldr	r3, .L87
 1421 0018 E15A     		ldrh	r1, [r4, r3]
 1422              	.LVL125:
 1423              		.loc 1 670 12 view .LVU416
 1424 001a 4D43     		muls	r5, r1
 671:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 672:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   len = MIN(len, MSC_MEDIA_PACKET);
 1425              		.loc 1 672 3 is_stmt 1 view .LVU417
 1426              		.loc 1 672 7 is_stmt 0 view .LVU418
 1427 001c 5E3B     		subs	r3, r3, #94
 1428 001e 9D42     		cmp	r5, r3
 1429 0020 00D9     		bls	.L81
 1430 0022 1D00     		movs	r5, r3
 1431              	.L81:
 1432              	.LVL126:
 673:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 674:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (((USBD_StorageTypeDef *)pdev->pUserData)->Write(lun, hmsc->bot_data,
 1433              		.loc 1 674 3 is_stmt 1 view .LVU419
ARM GAS  /tmp/ccCIT76y.s 			page 42


 1434              		.loc 1 674 35 is_stmt 0 view .LVU420
 1435 0024 AF23     		movs	r3, #175
 1436 0026 9B00     		lsls	r3, r3, #2
 1437 0028 F358     		ldr	r3, [r6, r3]
 1438              		.loc 1 674 47 view .LVU421
 1439 002a 5B69     		ldr	r3, [r3, #20]
 1440 002c 9946     		mov	r9, r3
 1441              		.loc 1 674 64 view .LVU422
 1442 002e 2700     		movs	r7, r4
 1443 0030 0C37     		adds	r7, r7, #12
 675:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                       hmsc->scsi_blk_addr,
 676:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                       (len / hmsc->scsi_blk_size)) < 0)
 1444              		.loc 1 676 60 view .LVU423
 1445 0032 2800     		movs	r0, r5
 1446              	.LVL127:
 1447              		.loc 1 676 60 view .LVU424
 1448 0034 FFF7FEFF 		bl	__aeabi_uidiv
 1449              	.LVL128:
 674:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                       hmsc->scsi_blk_addr,
 1450              		.loc 1 674 8 view .LVU425
 1451 0038 83B2     		uxth	r3, r0
 1452 003a 9922     		movs	r2, #153
 1453 003c 9200     		lsls	r2, r2, #2
 1454 003e A258     		ldr	r2, [r4, r2]
 1455 0040 3900     		movs	r1, r7
 1456 0042 4046     		mov	r0, r8
 1457 0044 C847     		blx	r9
 1458              	.LVL129:
 674:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                                       hmsc->scsi_blk_addr,
 1459              		.loc 1 674 6 view .LVU426
 1460 0046 0028     		cmp	r0, #0
 1461 0048 1BDB     		blt	.L86
 677:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 678:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     SCSI_SenseCode(pdev, lun, HARDWARE_ERROR, WRITE_FAULT);
 679:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 680:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1;
 681:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 682:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 683:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_blk_addr += (len / hmsc->scsi_blk_size);
 1462              		.loc 1 683 3 is_stmt 1 view .LVU427
 1463              		.loc 1 683 37 is_stmt 0 view .LVU428
 1464 004a 1B4B     		ldr	r3, .L87
 1465 004c E35A     		ldrh	r3, [r4, r3]
 1466 004e 9846     		mov	r8, r3
 1467              		.loc 1 683 31 view .LVU429
 1468 0050 1900     		movs	r1, r3
 1469 0052 2800     		movs	r0, r5
 1470 0054 FFF7FEFF 		bl	__aeabi_uidiv
 1471              	.LVL130:
 1472              		.loc 1 683 23 view .LVU430
 1473 0058 9922     		movs	r2, #153
 1474 005a 9200     		lsls	r2, r2, #2
 1475 005c A358     		ldr	r3, [r4, r2]
 1476 005e 1B18     		adds	r3, r3, r0
 1477 0060 A350     		str	r3, [r4, r2]
 684:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->scsi_blk_len -= (len / hmsc->scsi_blk_size);
 1478              		.loc 1 684 3 is_stmt 1 view .LVU431
ARM GAS  /tmp/ccCIT76y.s 			page 43


 1479              		.loc 1 684 22 is_stmt 0 view .LVU432
 1480 0062 0432     		adds	r2, r2, #4
 1481 0064 A358     		ldr	r3, [r4, r2]
 1482 0066 1B1A     		subs	r3, r3, r0
 1483 0068 A350     		str	r3, [r4, r2]
 685:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 686:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   /* case 12 : Ho = Do */
 687:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   hmsc->csw.dDataResidue -= len;
 1484              		.loc 1 687 3 is_stmt 1 view .LVU433
 1485              		.loc 1 687 26 is_stmt 0 view .LVU434
 1486 006a 343A     		subs	r2, r2, #52
 1487 006c A158     		ldr	r1, [r4, r2]
 1488 006e 4D1B     		subs	r5, r1, r5
 1489              	.LVL131:
 1490              		.loc 1 687 26 view .LVU435
 1491 0070 A550     		str	r5, [r4, r2]
 688:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 689:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   if (hmsc->scsi_blk_len == 0U)
 1492              		.loc 1 689 3 is_stmt 1 view .LVU436
 1493              		.loc 1 689 6 is_stmt 0 view .LVU437
 1494 0072 002B     		cmp	r3, #0
 1495 0074 0ED1     		bne	.L84
 690:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 691:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     MSC_BOT_SendCSW(pdev, USBD_CSW_CMD_PASSED);
 1496              		.loc 1 691 5 is_stmt 1 view .LVU438
 1497 0076 0021     		movs	r1, #0
 1498 0078 3000     		movs	r0, r6
 1499 007a FFF7FEFF 		bl	MSC_BOT_SendCSW
 1500              	.LVL132:
 692:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 693:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   else
 694:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 695:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     len = MIN((hmsc->scsi_blk_len * hmsc->scsi_blk_size), MSC_MEDIA_PACKET);
 696:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* Prepare EP to Receive next packet */
 697:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     USBD_LL_PrepareReceive(pdev, MSC_EPOUT_ADDR, hmsc->bot_data, len);
 698:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 699:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 700:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 1501              		.loc 1 700 10 is_stmt 0 view .LVU439
 1502 007e 0020     		movs	r0, #0
 1503 0080 16E0     		b	.L83
 1504              	.LVL133:
 1505              	.L86:
 678:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1506              		.loc 1 678 5 is_stmt 1 view .LVU440
 1507 0082 0323     		movs	r3, #3
 1508 0084 0422     		movs	r2, #4
 1509 0086 4146     		mov	r1, r8
 1510 0088 3000     		movs	r0, r6
 1511 008a FFF7FEFF 		bl	SCSI_SenseCode
 1512              	.LVL134:
 680:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1513              		.loc 1 680 5 view .LVU441
 680:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1514              		.loc 1 680 12 is_stmt 0 view .LVU442
 1515 008e 0120     		movs	r0, #1
 1516 0090 4042     		rsbs	r0, r0, #0
ARM GAS  /tmp/ccCIT76y.s 			page 44


 1517 0092 0DE0     		b	.L83
 1518              	.LVL135:
 1519              	.L84:
 695:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* Prepare EP to Receive next packet */
 1520              		.loc 1 695 5 is_stmt 1 view .LVU443
 695:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* Prepare EP to Receive next packet */
 1521              		.loc 1 695 11 is_stmt 0 view .LVU444
 1522 0094 4246     		mov	r2, r8
 1523 0096 5343     		muls	r3, r2
 695:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     /* Prepare EP to Receive next packet */
 1524              		.loc 1 695 9 view .LVU445
 1525 0098 8022     		movs	r2, #128
 1526 009a 9200     		lsls	r2, r2, #2
 1527 009c 9342     		cmp	r3, r2
 1528 009e 00D9     		bls	.L85
 1529 00a0 1300     		movs	r3, r2
 1530              	.L85:
 1531              	.LVL136:
 697:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1532              		.loc 1 697 5 is_stmt 1 view .LVU446
 1533 00a2 9BB2     		uxth	r3, r3
 1534              	.LVL137:
 697:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1535              		.loc 1 697 5 is_stmt 0 view .LVU447
 1536 00a4 3A00     		movs	r2, r7
 1537 00a6 0121     		movs	r1, #1
 1538 00a8 3000     		movs	r0, r6
 1539 00aa FFF7FEFF 		bl	USBD_LL_PrepareReceive
 1540              	.LVL138:
 1541              		.loc 1 700 10 view .LVU448
 1542 00ae 0020     		movs	r0, #0
 1543              	.L83:
 701:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 1544              		.loc 1 701 1 view .LVU449
 1545              		@ sp needed
 1546              	.LVL139:
 1547              	.LVL140:
 1548              	.LVL141:
 1549              		.loc 1 701 1 view .LVU450
 1550 00b0 0CBC     		pop	{r2, r3}
 1551 00b2 9046     		mov	r8, r2
 1552 00b4 9946     		mov	r9, r3
 1553 00b6 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1554              	.L88:
 1555              		.align	2
 1556              	.L87:
 1557 00b8 5E020000 		.word	606
 1558              		.cfi_endproc
 1559              	.LFE58:
 1561              		.section	.text.SCSI_Write10,"ax",%progbits
 1562              		.align	1
 1563              		.syntax unified
 1564              		.code	16
 1565              		.thumb_func
 1566              		.fpu softvfp
 1568              	SCSI_Write10:
 1569              	.LVL142:
ARM GAS  /tmp/ccCIT76y.s 			page 45


 1570              	.LFB54:
 510:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 1571              		.loc 1 510 1 is_stmt 1 view -0
 1572              		.cfi_startproc
 1573              		@ args = 0, pretend = 0, frame = 0
 1574              		@ frame_needed = 0, uses_anonymous_args = 0
 510:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 1575              		.loc 1 510 1 is_stmt 0 view .LVU452
 1576 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1577              	.LCFI13:
 1578              		.cfi_def_cfa_offset 20
 1579              		.cfi_offset 4, -20
 1580              		.cfi_offset 5, -16
 1581              		.cfi_offset 6, -12
 1582              		.cfi_offset 7, -8
 1583              		.cfi_offset 14, -4
 1584 0002 C646     		mov	lr, r8
 1585 0004 00B5     		push	{lr}
 1586              	.LCFI14:
 1587              		.cfi_def_cfa_offset 24
 1588              		.cfi_offset 8, -24
 1589 0006 0600     		movs	r6, r0
 1590 0008 8846     		mov	r8, r1
 1591 000a 1500     		movs	r5, r2
 511:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint32_t len;
 1592              		.loc 1 511 3 is_stmt 1 view .LVU453
 511:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   uint32_t len;
 1593              		.loc 1 511 32 is_stmt 0 view .LVU454
 1594 000c AE23     		movs	r3, #174
 1595 000e 9B00     		lsls	r3, r3, #2
 1596 0010 C458     		ldr	r4, [r0, r3]
 1597              	.LVL143:
 512:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1598              		.loc 1 512 3 is_stmt 1 view .LVU455
 514:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1599              		.loc 1 514 3 view .LVU456
 514:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1600              		.loc 1 514 11 is_stmt 0 view .LVU457
 1601 0012 237A     		ldrb	r3, [r4, #8]
 514:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1602              		.loc 1 514 6 view .LVU458
 1603 0014 002B     		cmp	r3, #0
 1604 0016 00D0     		beq	.LCB1413
 1605 0018 72E0     		b	.L90	@long jump
 1606              	.LCB1413:
 517:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1607              		.loc 1 517 5 is_stmt 1 view .LVU459
 517:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1608              		.loc 1 517 37 is_stmt 0 view .LVU460
 1609 001a 8623     		movs	r3, #134
 1610 001c 9B00     		lsls	r3, r3, #2
 1611 001e E356     		ldrsb	r3, [r4, r3]
 517:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1612              		.loc 1 517 8 view .LVU461
 1613 0020 002B     		cmp	r3, #0
 1614 0022 46DB     		blt	.L98
 524:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
ARM GAS  /tmp/ccCIT76y.s 			page 46


 1615              		.loc 1 524 5 is_stmt 1 view .LVU462
 524:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1616              		.loc 1 524 37 is_stmt 0 view .LVU463
 1617 0024 AF23     		movs	r3, #175
 1618 0026 9B00     		lsls	r3, r3, #2
 1619 0028 C358     		ldr	r3, [r0, r3]
 524:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1620              		.loc 1 524 49 view .LVU464
 1621 002a 9B68     		ldr	r3, [r3, #8]
 524:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1622              		.loc 1 524 10 view .LVU465
 1623 002c 0800     		movs	r0, r1
 1624              	.LVL144:
 524:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1625              		.loc 1 524 10 view .LVU466
 1626 002e 9847     		blx	r3
 1627              	.LVL145:
 524:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1628              		.loc 1 524 8 view .LVU467
 1629 0030 0028     		cmp	r0, #0
 1630 0032 48D1     		bne	.L99
 531:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1631              		.loc 1 531 5 is_stmt 1 view .LVU468
 531:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1632              		.loc 1 531 37 is_stmt 0 view .LVU469
 1633 0034 AF23     		movs	r3, #175
 1634 0036 9B00     		lsls	r3, r3, #2
 1635 0038 F358     		ldr	r3, [r6, r3]
 531:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1636              		.loc 1 531 49 view .LVU470
 1637 003a DB68     		ldr	r3, [r3, #12]
 531:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1638              		.loc 1 531 10 view .LVU471
 1639 003c 4046     		mov	r0, r8
 1640 003e 9847     		blx	r3
 1641              	.LVL146:
 1642 0040 071E     		subs	r7, r0, #0
 531:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1643              		.loc 1 531 8 view .LVU472
 1644 0042 49D1     		bne	.L100
 537:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1645              		.loc 1 537 5 is_stmt 1 view .LVU473
 537:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1646              		.loc 1 537 44 is_stmt 0 view .LVU474
 1647 0044 AA78     		ldrb	r2, [r5, #2]
 537:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1648              		.loc 1 537 48 view .LVU475
 1649 0046 1206     		lsls	r2, r2, #24
 538:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] << 8) |
 1650              		.loc 1 538 44 view .LVU476
 1651 0048 EB78     		ldrb	r3, [r5, #3]
 538:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] << 8) |
 1652              		.loc 1 538 48 view .LVU477
 1653 004a 1B04     		lsls	r3, r3, #16
 537:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1654              		.loc 1 537 55 view .LVU478
 1655 004c 1A43     		orrs	r2, r3
ARM GAS  /tmp/ccCIT76y.s 			page 47


 539:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 1656              		.loc 1 539 44 view .LVU479
 1657 004e 2B79     		ldrb	r3, [r5, #4]
 539:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 1658              		.loc 1 539 48 view .LVU480
 1659 0050 1B02     		lsls	r3, r3, #8
 538:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[4] << 8) |
 1660              		.loc 1 538 55 view .LVU481
 1661 0052 1A43     		orrs	r2, r3
 540:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1662              		.loc 1 540 43 view .LVU482
 1663 0054 6B79     		ldrb	r3, [r5, #5]
 539:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           (uint32_t)params[5];
 1664              		.loc 1 539 54 view .LVU483
 1665 0056 1A43     		orrs	r2, r3
 537:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                           ((uint32_t)params[3] << 16) |
 1666              		.loc 1 537 25 view .LVU484
 1667 0058 9923     		movs	r3, #153
 1668 005a 9B00     		lsls	r3, r3, #2
 1669 005c E250     		str	r2, [r4, r3]
 542:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                          (uint32_t)params[8];
 1670              		.loc 1 542 5 is_stmt 1 view .LVU485
 542:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                          (uint32_t)params[8];
 1671              		.loc 1 542 43 is_stmt 0 view .LVU486
 1672 005e EB79     		ldrb	r3, [r5, #7]
 542:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                          (uint32_t)params[8];
 1673              		.loc 1 542 47 view .LVU487
 1674 0060 1B02     		lsls	r3, r3, #8
 543:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1675              		.loc 1 543 42 view .LVU488
 1676 0062 297A     		ldrb	r1, [r5, #8]
 542:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                          (uint32_t)params[8];
 1677              		.loc 1 542 53 view .LVU489
 1678 0064 0B43     		orrs	r3, r1
 542:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                          (uint32_t)params[8];
 1679              		.loc 1 542 24 view .LVU490
 1680 0066 9A21     		movs	r1, #154
 1681 0068 8900     		lsls	r1, r1, #2
 1682 006a 6350     		str	r3, [r4, r1]
 546:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 1683              		.loc 1 546 5 is_stmt 1 view .LVU491
 546:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 1684              		.loc 1 546 9 is_stmt 0 view .LVU492
 1685 006c 4146     		mov	r1, r8
 1686 006e 3000     		movs	r0, r6
 1687 0070 FFF7FEFF 		bl	SCSI_CheckAddressRange
 1688              	.LVL147:
 546:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                                hmsc->scsi_blk_len) < 0)
 1689              		.loc 1 546 8 view .LVU493
 1690 0074 0028     		cmp	r0, #0
 1691 0076 47DB     		blt	.L97
 552:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1692              		.loc 1 552 5 is_stmt 1 view .LVU494
 552:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1693              		.loc 1 552 15 is_stmt 0 view .LVU495
 1694 0078 9A23     		movs	r3, #154
 1695 007a 9B00     		lsls	r3, r3, #2
ARM GAS  /tmp/ccCIT76y.s 			page 48


 1696 007c E258     		ldr	r2, [r4, r3]
 552:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1697              		.loc 1 552 36 view .LVU496
 1698 007e 244B     		ldr	r3, .L102
 1699 0080 E35A     		ldrh	r3, [r4, r3]
 552:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1700              		.loc 1 552 9 view .LVU497
 1701 0082 5343     		muls	r3, r2
 1702              	.LVL148:
 555:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1703              		.loc 1 555 5 is_stmt 1 view .LVU498
 555:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1704              		.loc 1 555 18 is_stmt 0 view .LVU499
 1705 0084 8522     		movs	r2, #133
 1706 0086 9200     		lsls	r2, r2, #2
 1707 0088 A258     		ldr	r2, [r4, r2]
 555:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     {
 1708              		.loc 1 555 8 view .LVU500
 1709 008a 9A42     		cmp	r2, r3
 1710 008c 2DD1     		bne	.L101
 561:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1711              		.loc 1 561 5 is_stmt 1 view .LVU501
 561:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1712              		.loc 1 561 9 is_stmt 0 view .LVU502
 1713 008e 8022     		movs	r2, #128
 1714 0090 9200     		lsls	r2, r2, #2
 1715 0092 9342     		cmp	r3, r2
 1716 0094 00D9     		bls	.L96
 1717 0096 1300     		movs	r3, r2
 1718              	.LVL149:
 1719              	.L96:
 564:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     USBD_LL_PrepareReceive(pdev, MSC_EPOUT_ADDR, hmsc->bot_data, len);
 1720              		.loc 1 564 5 is_stmt 1 view .LVU503
 564:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     USBD_LL_PrepareReceive(pdev, MSC_EPOUT_ADDR, hmsc->bot_data, len);
 1721              		.loc 1 564 21 is_stmt 0 view .LVU504
 1722 0098 0122     		movs	r2, #1
 1723 009a 2272     		strb	r2, [r4, #8]
 565:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1724              		.loc 1 565 5 is_stmt 1 view .LVU505
 565:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1725              		.loc 1 565 54 is_stmt 0 view .LVU506
 1726 009c 2200     		movs	r2, r4
 1727 009e 0C32     		adds	r2, r2, #12
 565:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1728              		.loc 1 565 5 view .LVU507
 1729 00a0 9BB2     		uxth	r3, r3
 1730              	.LVL150:
 565:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1731              		.loc 1 565 5 view .LVU508
 1732 00a2 0121     		movs	r1, #1
 1733 00a4 3000     		movs	r0, r6
 1734 00a6 FFF7FEFF 		bl	USBD_LL_PrepareReceive
 1735              	.LVL151:
 571:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 1736              		.loc 1 571 3 is_stmt 1 view .LVU509
 1737              	.L92:
 572:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
ARM GAS  /tmp/ccCIT76y.s 			page 49


 1738              		.loc 1 572 1 is_stmt 0 view .LVU510
 1739 00aa 3800     		movs	r0, r7
 1740              		@ sp needed
 1741              	.LVL152:
 1742              	.LVL153:
 1743              	.LVL154:
 572:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1744              		.loc 1 572 1 view .LVU511
 1745 00ac 04BC     		pop	{r2}
 1746 00ae 9046     		mov	r8, r2
 1747 00b0 F0BD     		pop	{r4, r5, r6, r7, pc}
 1748              	.LVL155:
 1749              	.L98:
 519:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1750              		.loc 1 519 7 is_stmt 1 view .LVU512
 1751 00b2 184B     		ldr	r3, .L102+4
 1752 00b4 E15C     		ldrb	r1, [r4, r3]
 1753              	.LVL156:
 519:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1754              		.loc 1 519 7 is_stmt 0 view .LVU513
 1755 00b6 FA3B     		subs	r3, r3, #250
 1756 00b8 FF3B     		subs	r3, r3, #255
 1757 00ba 0522     		movs	r2, #5
 1758              	.LVL157:
 519:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1759              		.loc 1 519 7 view .LVU514
 1760 00bc FFF7FEFF 		bl	SCSI_SenseCode
 1761              	.LVL158:
 520:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1762              		.loc 1 520 7 is_stmt 1 view .LVU515
 520:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1763              		.loc 1 520 14 is_stmt 0 view .LVU516
 1764 00c0 0127     		movs	r7, #1
 1765 00c2 7F42     		rsbs	r7, r7, #0
 1766 00c4 F1E7     		b	.L92
 1767              	.L99:
 526:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1768              		.loc 1 526 7 is_stmt 1 view .LVU517
 1769 00c6 3A23     		movs	r3, #58
 1770 00c8 0222     		movs	r2, #2
 1771 00ca 4146     		mov	r1, r8
 1772 00cc 3000     		movs	r0, r6
 1773 00ce FFF7FEFF 		bl	SCSI_SenseCode
 1774              	.LVL159:
 527:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1775              		.loc 1 527 7 view .LVU518
 527:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1776              		.loc 1 527 14 is_stmt 0 view .LVU519
 1777 00d2 0127     		movs	r7, #1
 1778 00d4 7F42     		rsbs	r7, r7, #0
 1779 00d6 E8E7     		b	.L92
 1780              	.L100:
 533:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1781              		.loc 1 533 7 is_stmt 1 view .LVU520
 1782 00d8 2723     		movs	r3, #39
 1783 00da 0222     		movs	r2, #2
 1784 00dc 4146     		mov	r1, r8
ARM GAS  /tmp/ccCIT76y.s 			page 50


 1785 00de 3000     		movs	r0, r6
 1786 00e0 FFF7FEFF 		bl	SCSI_SenseCode
 1787              	.LVL160:
 534:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1788              		.loc 1 534 7 view .LVU521
 534:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1789              		.loc 1 534 14 is_stmt 0 view .LVU522
 1790 00e4 0127     		movs	r7, #1
 1791 00e6 7F42     		rsbs	r7, r7, #0
 1792 00e8 DFE7     		b	.L92
 1793              	.LVL161:
 1794              	.L101:
 557:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1795              		.loc 1 557 7 is_stmt 1 view .LVU523
 1796 00ea 0A4B     		ldr	r3, .L102+4
 1797              	.LVL162:
 557:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 1798              		.loc 1 557 7 is_stmt 0 view .LVU524
 1799 00ec E15C     		ldrb	r1, [r4, r3]
 1800 00ee FA3B     		subs	r3, r3, #250
 1801 00f0 FF3B     		subs	r3, r3, #255
 1802 00f2 0522     		movs	r2, #5
 1803 00f4 3000     		movs	r0, r6
 1804 00f6 FFF7FEFF 		bl	SCSI_SenseCode
 1805              	.LVL163:
 558:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1806              		.loc 1 558 7 is_stmt 1 view .LVU525
 558:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1807              		.loc 1 558 14 is_stmt 0 view .LVU526
 1808 00fa 0127     		movs	r7, #1
 1809 00fc 7F42     		rsbs	r7, r7, #0
 1810 00fe D4E7     		b	.L92
 1811              	.LVL164:
 1812              	.L90:
 569:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1813              		.loc 1 569 5 is_stmt 1 view .LVU527
 569:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1814              		.loc 1 569 12 is_stmt 0 view .LVU528
 1815 0100 FFF7FEFF 		bl	SCSI_ProcessWrite
 1816              	.LVL165:
 569:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1817              		.loc 1 569 12 view .LVU529
 1818 0104 0700     		movs	r7, r0
 1819 0106 D0E7     		b	.L92
 1820              	.L97:
 549:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     }
 1821              		.loc 1 549 14 view .LVU530
 1822 0108 0127     		movs	r7, #1
 1823 010a 7F42     		rsbs	r7, r7, #0
 1824 010c CDE7     		b	.L92
 1825              	.L103:
 1826 010e C046     		.align	2
 1827              	.L102:
 1828 0110 5E020000 		.word	606
 1829 0114 19020000 		.word	537
 1830              		.cfi_endproc
 1831              	.LFE54:
ARM GAS  /tmp/ccCIT76y.s 			page 51


 1833              		.section	.text.SCSI_Verify10,"ax",%progbits
 1834              		.align	1
 1835              		.syntax unified
 1836              		.code	16
 1837              		.thumb_func
 1838              		.fpu softvfp
 1840              	SCSI_Verify10:
 1841              	.LVL166:
 1842              	.LFB55:
 584:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 1843              		.loc 1 584 1 is_stmt 1 view -0
 1844              		.cfi_startproc
 1845              		@ args = 0, pretend = 0, frame = 0
 1846              		@ frame_needed = 0, uses_anonymous_args = 0
 584:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   USBD_MSC_BOT_HandleTypeDef  *hmsc = (USBD_MSC_BOT_HandleTypeDef *) pdev->pClassData;
 1847              		.loc 1 584 1 is_stmt 0 view .LVU532
 1848 0000 10B5     		push	{r4, lr}
 1849              	.LCFI15:
 1850              		.cfi_def_cfa_offset 8
 1851              		.cfi_offset 4, -8
 1852              		.cfi_offset 14, -4
 585:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1853              		.loc 1 585 3 is_stmt 1 view .LVU533
 585:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1854              		.loc 1 585 32 is_stmt 0 view .LVU534
 1855 0002 AE23     		movs	r3, #174
 1856 0004 9B00     		lsls	r3, r3, #2
 1857 0006 C458     		ldr	r4, [r0, r3]
 1858              	.LVL167:
 587:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1859              		.loc 1 587 3 is_stmt 1 view .LVU535
 587:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1860              		.loc 1 587 14 is_stmt 0 view .LVU536
 1861 0008 5378     		ldrb	r3, [r2, #1]
 587:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1862              		.loc 1 587 6 view .LVU537
 1863 000a 9B07     		lsls	r3, r3, #30
 1864 000c 0DD4     		bmi	.L108
 593:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                              hmsc->scsi_blk_len) < 0)
 1865              		.loc 1 593 3 is_stmt 1 view .LVU538
 593:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                              hmsc->scsi_blk_len) < 0)
 1866              		.loc 1 593 7 is_stmt 0 view .LVU539
 1867 000e 9A23     		movs	r3, #154
 1868 0010 9B00     		lsls	r3, r3, #2
 1869 0012 E358     		ldr	r3, [r4, r3]
 1870 0014 9922     		movs	r2, #153
 1871              	.LVL168:
 593:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                              hmsc->scsi_blk_len) < 0)
 1872              		.loc 1 593 7 view .LVU540
 1873 0016 9200     		lsls	r2, r2, #2
 1874 0018 A258     		ldr	r2, [r4, r2]
 1875 001a FFF7FEFF 		bl	SCSI_CheckAddressRange
 1876              	.LVL169:
 593:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****                              hmsc->scsi_blk_len) < 0)
 1877              		.loc 1 593 6 view .LVU541
 1878 001e 0028     		cmp	r0, #0
 1879 0020 0ADB     		blt	.L107
ARM GAS  /tmp/ccCIT76y.s 			page 52


 598:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 1880              		.loc 1 598 3 is_stmt 1 view .LVU542
 598:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   return 0;
 1881              		.loc 1 598 25 is_stmt 0 view .LVU543
 1882 0022 0023     		movs	r3, #0
 1883 0024 6381     		strh	r3, [r4, #10]
 599:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 1884              		.loc 1 599 3 is_stmt 1 view .LVU544
 599:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 1885              		.loc 1 599 10 is_stmt 0 view .LVU545
 1886 0026 0020     		movs	r0, #0
 1887              	.L106:
 600:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1888              		.loc 1 600 1 view .LVU546
 1889              		@ sp needed
 1890              	.LVL170:
 600:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 1891              		.loc 1 600 1 view .LVU547
 1892 0028 10BD     		pop	{r4, pc}
 1893              	.LVL171:
 1894              	.L108:
 589:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1; /* Error, Verify Mode Not supported*/
 1895              		.loc 1 589 5 is_stmt 1 view .LVU548
 1896 002a 2423     		movs	r3, #36
 1897 002c 0522     		movs	r2, #5
 1898              	.LVL172:
 589:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     return -1; /* Error, Verify Mode Not supported*/
 1899              		.loc 1 589 5 is_stmt 0 view .LVU549
 1900 002e FFF7FEFF 		bl	SCSI_SenseCode
 1901              	.LVL173:
 590:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1902              		.loc 1 590 5 is_stmt 1 view .LVU550
 590:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1903              		.loc 1 590 12 is_stmt 0 view .LVU551
 1904 0032 0120     		movs	r0, #1
 1905 0034 4042     		rsbs	r0, r0, #0
 1906 0036 F7E7     		b	.L106
 1907              	.L107:
 596:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 1908              		.loc 1 596 12 view .LVU552
 1909 0038 0120     		movs	r0, #1
 1910 003a 4042     		rsbs	r0, r0, #0
 1911 003c F4E7     		b	.L106
 1912              		.cfi_endproc
 1913              	.LFE55:
 1915              		.section	.text.SCSI_ProcessCmd,"ax",%progbits
 1916              		.align	1
 1917              		.global	SCSI_ProcessCmd
 1918              		.syntax unified
 1919              		.code	16
 1920              		.thumb_func
 1921              		.fpu softvfp
 1923              	SCSI_ProcessCmd:
 1924              	.LVL174:
 1925              	.LFB43:
 116:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   switch (cmd[0])
 1926              		.loc 1 116 1 is_stmt 1 view -0
ARM GAS  /tmp/ccCIT76y.s 			page 53


 1927              		.cfi_startproc
 1928              		@ args = 0, pretend = 0, frame = 0
 1929              		@ frame_needed = 0, uses_anonymous_args = 0
 116:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   switch (cmd[0])
 1930              		.loc 1 116 1 is_stmt 0 view .LVU554
 1931 0000 10B5     		push	{r4, lr}
 1932              	.LCFI16:
 1933              		.cfi_def_cfa_offset 8
 1934              		.cfi_offset 4, -8
 1935              		.cfi_offset 14, -4
 117:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1936              		.loc 1 117 3 is_stmt 1 view .LVU555
 117:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   {
 1937              		.loc 1 117 14 is_stmt 0 view .LVU556
 1938 0002 1378     		ldrb	r3, [r2]
 1939 0004 5A2B     		cmp	r3, #90
 1940 0006 33D8     		bhi	.L110
 1941 0008 9B00     		lsls	r3, r3, #2
 1942 000a 1D4C     		ldr	r4, .L125
 1943 000c E358     		ldr	r3, [r4, r3]
 1944 000e 9F46     		mov	pc, r3
 1945              		.section	.rodata.SCSI_ProcessCmd,"a",%progbits
 1946              		.align	2
 1947              	.L112:
 1948 0000 10000000 		.word	.L123
 1949 0004 70000000 		.word	.L110
 1950 0008 70000000 		.word	.L110
 1951 000c 18000000 		.word	.L122
 1952 0010 70000000 		.word	.L110
 1953 0014 70000000 		.word	.L110
 1954 0018 70000000 		.word	.L110
 1955 001c 70000000 		.word	.L110
 1956 0020 70000000 		.word	.L110
 1957 0024 70000000 		.word	.L110
 1958 0028 70000000 		.word	.L110
 1959 002c 70000000 		.word	.L110
 1960 0030 70000000 		.word	.L110
 1961 0034 70000000 		.word	.L110
 1962 0038 70000000 		.word	.L110
 1963 003c 70000000 		.word	.L110
 1964 0040 70000000 		.word	.L110
 1965 0044 70000000 		.word	.L110
 1966 0048 20000000 		.word	.L121
 1967 004c 70000000 		.word	.L110
 1968 0050 70000000 		.word	.L110
 1969 0054 70000000 		.word	.L110
 1970 0058 70000000 		.word	.L110
 1971 005c 70000000 		.word	.L110
 1972 0060 70000000 		.word	.L110
 1973 0064 70000000 		.word	.L110
 1974 0068 38000000 		.word	.L120
 1975 006c 28000000 		.word	.L119
 1976 0070 70000000 		.word	.L110
 1977 0074 70000000 		.word	.L110
 1978 0078 30000000 		.word	.L118
 1979 007c 70000000 		.word	.L110
 1980 0080 70000000 		.word	.L110
ARM GAS  /tmp/ccCIT76y.s 			page 54


 1981 0084 70000000 		.word	.L110
 1982 0088 70000000 		.word	.L110
 1983 008c 48000000 		.word	.L117
 1984 0090 70000000 		.word	.L110
 1985 0094 50000000 		.word	.L116
 1986 0098 70000000 		.word	.L110
 1987 009c 70000000 		.word	.L110
 1988 00a0 58000000 		.word	.L115
 1989 00a4 70000000 		.word	.L110
 1990 00a8 60000000 		.word	.L114
 1991 00ac 70000000 		.word	.L110
 1992 00b0 70000000 		.word	.L110
 1993 00b4 70000000 		.word	.L110
 1994 00b8 70000000 		.word	.L110
 1995 00bc 68000000 		.word	.L113
 1996 00c0 70000000 		.word	.L110
 1997 00c4 70000000 		.word	.L110
 1998 00c8 70000000 		.word	.L110
 1999 00cc 70000000 		.word	.L110
 2000 00d0 70000000 		.word	.L110
 2001 00d4 70000000 		.word	.L110
 2002 00d8 70000000 		.word	.L110
 2003 00dc 70000000 		.word	.L110
 2004 00e0 70000000 		.word	.L110
 2005 00e4 70000000 		.word	.L110
 2006 00e8 70000000 		.word	.L110
 2007 00ec 70000000 		.word	.L110
 2008 00f0 70000000 		.word	.L110
 2009 00f4 70000000 		.word	.L110
 2010 00f8 70000000 		.word	.L110
 2011 00fc 70000000 		.word	.L110
 2012 0100 70000000 		.word	.L110
 2013 0104 70000000 		.word	.L110
 2014 0108 70000000 		.word	.L110
 2015 010c 70000000 		.word	.L110
 2016 0110 70000000 		.word	.L110
 2017 0114 70000000 		.word	.L110
 2018 0118 70000000 		.word	.L110
 2019 011c 70000000 		.word	.L110
 2020 0120 70000000 		.word	.L110
 2021 0124 70000000 		.word	.L110
 2022 0128 70000000 		.word	.L110
 2023 012c 70000000 		.word	.L110
 2024 0130 70000000 		.word	.L110
 2025 0134 70000000 		.word	.L110
 2026 0138 70000000 		.word	.L110
 2027 013c 70000000 		.word	.L110
 2028 0140 70000000 		.word	.L110
 2029 0144 70000000 		.word	.L110
 2030 0148 70000000 		.word	.L110
 2031 014c 70000000 		.word	.L110
 2032 0150 70000000 		.word	.L110
 2033 0154 70000000 		.word	.L110
 2034 0158 70000000 		.word	.L110
 2035 015c 70000000 		.word	.L110
 2036 0160 70000000 		.word	.L110
 2037 0164 70000000 		.word	.L110
ARM GAS  /tmp/ccCIT76y.s 			page 55


 2038 0168 40000000 		.word	.L111
 2039              		.section	.text.SCSI_ProcessCmd
 2040              	.L123:
 120:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2041              		.loc 1 120 7 is_stmt 1 view .LVU557
 2042 0010 FFF7FEFF 		bl	SCSI_TestUnitReady
 2043              	.LVL175:
 121:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2044              		.loc 1 121 7 view .LVU558
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2045              		.loc 1 171 10 is_stmt 0 view .LVU559
 2046 0014 0020     		movs	r0, #0
 2047              	.L124:
 172:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2048              		.loc 1 172 1 view .LVU560
 2049              		@ sp needed
 2050 0016 10BD     		pop	{r4, pc}
 2051              	.LVL176:
 2052              	.L122:
 124:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2053              		.loc 1 124 7 is_stmt 1 view .LVU561
 2054 0018 FFF7FEFF 		bl	SCSI_RequestSense
 2055              	.LVL177:
 125:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_INQUIRY:
 2056              		.loc 1 125 7 view .LVU562
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2057              		.loc 1 171 10 is_stmt 0 view .LVU563
 2058 001c 0020     		movs	r0, #0
 125:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****     case SCSI_INQUIRY:
 2059              		.loc 1 125 7 view .LVU564
 2060 001e FAE7     		b	.L124
 2061              	.LVL178:
 2062              	.L121:
 127:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2063              		.loc 1 127 7 is_stmt 1 view .LVU565
 2064 0020 FFF7FEFF 		bl	SCSI_Inquiry
 2065              	.LVL179:
 128:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2066              		.loc 1 128 7 view .LVU566
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2067              		.loc 1 171 10 is_stmt 0 view .LVU567
 2068 0024 0020     		movs	r0, #0
 128:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2069              		.loc 1 128 7 view .LVU568
 2070 0026 F6E7     		b	.L124
 2071              	.LVL180:
 2072              	.L119:
 131:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2073              		.loc 1 131 7 is_stmt 1 view .LVU569
 2074 0028 FFF7FEFF 		bl	SCSI_StartStopUnit
 2075              	.LVL181:
 132:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2076              		.loc 1 132 7 view .LVU570
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2077              		.loc 1 171 10 is_stmt 0 view .LVU571
 2078 002c 0020     		movs	r0, #0
 132:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
ARM GAS  /tmp/ccCIT76y.s 			page 56


 2079              		.loc 1 132 7 view .LVU572
 2080 002e F2E7     		b	.L124
 2081              	.LVL182:
 2082              	.L118:
 135:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2083              		.loc 1 135 7 is_stmt 1 view .LVU573
 2084 0030 FFF7FEFF 		bl	SCSI_StartStopUnit
 2085              	.LVL183:
 136:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2086              		.loc 1 136 7 view .LVU574
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2087              		.loc 1 171 10 is_stmt 0 view .LVU575
 2088 0034 0020     		movs	r0, #0
 136:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2089              		.loc 1 136 7 view .LVU576
 2090 0036 EEE7     		b	.L124
 2091              	.LVL184:
 2092              	.L120:
 139:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2093              		.loc 1 139 7 is_stmt 1 view .LVU577
 2094 0038 FFF7FEFF 		bl	SCSI_ModeSense6
 2095              	.LVL185:
 140:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2096              		.loc 1 140 7 view .LVU578
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2097              		.loc 1 171 10 is_stmt 0 view .LVU579
 2098 003c 0020     		movs	r0, #0
 140:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2099              		.loc 1 140 7 view .LVU580
 2100 003e EAE7     		b	.L124
 2101              	.LVL186:
 2102              	.L111:
 143:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2103              		.loc 1 143 7 is_stmt 1 view .LVU581
 2104 0040 FFF7FEFF 		bl	SCSI_ModeSense10
 2105              	.LVL187:
 144:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2106              		.loc 1 144 7 view .LVU582
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2107              		.loc 1 171 10 is_stmt 0 view .LVU583
 2108 0044 0020     		movs	r0, #0
 144:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2109              		.loc 1 144 7 view .LVU584
 2110 0046 E6E7     		b	.L124
 2111              	.LVL188:
 2112              	.L117:
 147:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2113              		.loc 1 147 7 is_stmt 1 view .LVU585
 2114 0048 FFF7FEFF 		bl	SCSI_ReadFormatCapacity
 2115              	.LVL189:
 148:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2116              		.loc 1 148 7 view .LVU586
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2117              		.loc 1 171 10 is_stmt 0 view .LVU587
 2118 004c 0020     		movs	r0, #0
 148:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2119              		.loc 1 148 7 view .LVU588
ARM GAS  /tmp/ccCIT76y.s 			page 57


 2120 004e E2E7     		b	.L124
 2121              	.LVL190:
 2122              	.L116:
 151:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2123              		.loc 1 151 7 is_stmt 1 view .LVU589
 2124 0050 FFF7FEFF 		bl	SCSI_ReadCapacity10
 2125              	.LVL191:
 152:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2126              		.loc 1 152 7 view .LVU590
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2127              		.loc 1 171 10 is_stmt 0 view .LVU591
 2128 0054 0020     		movs	r0, #0
 152:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2129              		.loc 1 152 7 view .LVU592
 2130 0056 DEE7     		b	.L124
 2131              	.LVL192:
 2132              	.L115:
 155:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2133              		.loc 1 155 7 is_stmt 1 view .LVU593
 2134 0058 FFF7FEFF 		bl	SCSI_Read10
 2135              	.LVL193:
 156:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2136              		.loc 1 156 7 view .LVU594
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2137              		.loc 1 171 10 is_stmt 0 view .LVU595
 2138 005c 0020     		movs	r0, #0
 156:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2139              		.loc 1 156 7 view .LVU596
 2140 005e DAE7     		b	.L124
 2141              	.LVL194:
 2142              	.L114:
 159:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2143              		.loc 1 159 7 is_stmt 1 view .LVU597
 2144 0060 FFF7FEFF 		bl	SCSI_Write10
 2145              	.LVL195:
 160:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2146              		.loc 1 160 7 view .LVU598
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2147              		.loc 1 171 10 is_stmt 0 view .LVU599
 2148 0064 0020     		movs	r0, #0
 160:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2149              		.loc 1 160 7 view .LVU600
 2150 0066 D6E7     		b	.L124
 2151              	.LVL196:
 2152              	.L113:
 163:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       break;
 2153              		.loc 1 163 7 is_stmt 1 view .LVU601
 2154 0068 FFF7FEFF 		bl	SCSI_Verify10
 2155              	.LVL197:
 164:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2156              		.loc 1 164 7 view .LVU602
 171:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** }
 2157              		.loc 1 171 10 is_stmt 0 view .LVU603
 2158 006c 0020     		movs	r0, #0
 164:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c **** 
 2159              		.loc 1 164 7 view .LVU604
 2160 006e D2E7     		b	.L124
ARM GAS  /tmp/ccCIT76y.s 			page 58


 2161              	.LVL198:
 2162              	.L110:
 167:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 2163              		.loc 1 167 7 is_stmt 1 view .LVU605
 2164 0070 2023     		movs	r3, #32
 2165 0072 0522     		movs	r2, #5
 2166              	.LVL199:
 167:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****       return -1;
 2167              		.loc 1 167 7 is_stmt 0 view .LVU606
 2168 0074 FFF7FEFF 		bl	SCSI_SenseCode
 2169              	.LVL200:
 168:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 2170              		.loc 1 168 7 is_stmt 1 view .LVU607
 168:Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Src/usbd_msc_scsi.c ****   }
 2171              		.loc 1 168 14 is_stmt 0 view .LVU608
 2172 0078 0120     		movs	r0, #1
 2173 007a 4042     		rsbs	r0, r0, #0
 2174 007c CBE7     		b	.L124
 2175              	.L126:
 2176 007e C046     		.align	2
 2177              	.L125:
 2178 0080 00000000 		.word	.L112
 2179              		.cfi_endproc
 2180              	.LFE43:
 2182              		.text
 2183              	.Letext0:
 2184              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 2185              		.file 3 "/usr/arm-none-eabi/include/sys/lock.h"
 2186              		.file 4 "/usr/arm-none-eabi/include/sys/_types.h"
 2187              		.file 5 "/usr/lib/gcc/arm-none-eabi/9.2.0/include/stddef.h"
 2188              		.file 6 "/usr/arm-none-eabi/include/sys/reent.h"
 2189              		.file 7 "/usr/arm-none-eabi/include/sys/_stdint.h"
 2190              		.file 8 "/usr/arm-none-eabi/include/stdlib.h"
 2191              		.file 9 "Drivers/CMSIS/Device/ST/STM32F0xx/Include/system_stm32f0xx.h"
 2192              		.file 10 "Drivers/STM32F0xx_HAL_Driver/Inc/stm32f0xx_hal.h"
 2193              		.file 11 "Middlewares/ST/STM32_USB_Device_Library/Core/Inc/usbd_def.h"
 2194              		.file 12 "Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Inc/usbd_msc_bot.h"
 2195              		.file 13 "Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Inc/usbd_msc_scsi.h"
 2196              		.file 14 "Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Inc/usbd_msc.h"
 2197              		.file 15 "Middlewares/ST/STM32_USB_Device_Library/Class/MSC/Inc/usbd_msc_data.h"
 2198              		.file 16 "Middlewares/ST/STM32_USB_Device_Library/Core/Inc/usbd_core.h"
ARM GAS  /tmp/ccCIT76y.s 			page 59


DEFINED SYMBOLS
                            *ABS*:0000000000000000 usbd_msc_scsi.c
     /tmp/ccCIT76y.s:16     .text.SCSI_Inquiry:0000000000000000 $t
     /tmp/ccCIT76y.s:23     .text.SCSI_Inquiry:0000000000000000 SCSI_Inquiry
     /tmp/ccCIT76y.s:151    .text.SCSI_Inquiry:0000000000000058 $d
     /tmp/ccCIT76y.s:156    .text.SCSI_ModeSense6:0000000000000000 $t
     /tmp/ccCIT76y.s:162    .text.SCSI_ModeSense6:0000000000000000 SCSI_ModeSense6
     /tmp/ccCIT76y.s:215    .text.SCSI_ModeSense6:0000000000000020 $d
     /tmp/ccCIT76y.s:220    .text.SCSI_ModeSense10:0000000000000000 $t
     /tmp/ccCIT76y.s:226    .text.SCSI_ModeSense10:0000000000000000 SCSI_ModeSense10
     /tmp/ccCIT76y.s:279    .text.SCSI_ModeSense10:0000000000000020 $d
     /tmp/ccCIT76y.s:284    .text.SCSI_RequestSense:0000000000000000 $t
     /tmp/ccCIT76y.s:290    .text.SCSI_RequestSense:0000000000000000 SCSI_RequestSense
     /tmp/ccCIT76y.s:418    .text.SCSI_RequestSense:000000000000006c $d
     /tmp/ccCIT76y.s:423    .text.SCSI_StartStopUnit:0000000000000000 $t
     /tmp/ccCIT76y.s:429    .text.SCSI_StartStopUnit:0000000000000000 SCSI_StartStopUnit
     /tmp/ccCIT76y.s:460    .text.SCSI_SenseCode:0000000000000000 $t
     /tmp/ccCIT76y.s:467    .text.SCSI_SenseCode:0000000000000000 SCSI_SenseCode
     /tmp/ccCIT76y.s:529    .text.SCSI_SenseCode:000000000000002c $d
     /tmp/ccCIT76y.s:534    .text.SCSI_TestUnitReady:0000000000000000 $t
     /tmp/ccCIT76y.s:540    .text.SCSI_TestUnitReady:0000000000000000 SCSI_TestUnitReady
     /tmp/ccCIT76y.s:637    .text.SCSI_TestUnitReady:0000000000000054 $d
     /tmp/ccCIT76y.s:642    .text.SCSI_ReadFormatCapacity:0000000000000000 $t
     /tmp/ccCIT76y.s:648    .text.SCSI_ReadFormatCapacity:0000000000000000 SCSI_ReadFormatCapacity
     /tmp/ccCIT76y.s:804    .text.SCSI_ReadCapacity10:0000000000000000 $t
     /tmp/ccCIT76y.s:810    .text.SCSI_ReadCapacity10:0000000000000000 SCSI_ReadCapacity10
     /tmp/ccCIT76y.s:931    .text.SCSI_ReadCapacity10:0000000000000064 $d
     /tmp/ccCIT76y.s:936    .text.SCSI_CheckAddressRange:0000000000000000 $t
     /tmp/ccCIT76y.s:942    .text.SCSI_CheckAddressRange:0000000000000000 SCSI_CheckAddressRange
     /tmp/ccCIT76y.s:1000   .text.SCSI_ProcessRead:0000000000000000 $t
     /tmp/ccCIT76y.s:1006   .text.SCSI_ProcessRead:0000000000000000 SCSI_ProcessRead
     /tmp/ccCIT76y.s:1162   .text.SCSI_ProcessRead:00000000000000a4 $d
     /tmp/ccCIT76y.s:1167   .text.SCSI_Read10:0000000000000000 $t
     /tmp/ccCIT76y.s:1173   .text.SCSI_Read10:0000000000000000 SCSI_Read10
     /tmp/ccCIT76y.s:1371   .text.SCSI_Read10:00000000000000cc $d
     /tmp/ccCIT76y.s:1377   .text.SCSI_ProcessWrite:0000000000000000 $t
     /tmp/ccCIT76y.s:1383   .text.SCSI_ProcessWrite:0000000000000000 SCSI_ProcessWrite
     /tmp/ccCIT76y.s:1557   .text.SCSI_ProcessWrite:00000000000000b8 $d
     /tmp/ccCIT76y.s:1562   .text.SCSI_Write10:0000000000000000 $t
     /tmp/ccCIT76y.s:1568   .text.SCSI_Write10:0000000000000000 SCSI_Write10
     /tmp/ccCIT76y.s:1828   .text.SCSI_Write10:0000000000000110 $d
     /tmp/ccCIT76y.s:1834   .text.SCSI_Verify10:0000000000000000 $t
     /tmp/ccCIT76y.s:1840   .text.SCSI_Verify10:0000000000000000 SCSI_Verify10
     /tmp/ccCIT76y.s:1916   .text.SCSI_ProcessCmd:0000000000000000 $t
     /tmp/ccCIT76y.s:1923   .text.SCSI_ProcessCmd:0000000000000000 SCSI_ProcessCmd
     /tmp/ccCIT76y.s:1946   .rodata.SCSI_ProcessCmd:0000000000000000 $d
     /tmp/ccCIT76y.s:2178   .text.SCSI_ProcessCmd:0000000000000080 $d

UNDEFINED SYMBOLS
MSC_Page00_Inquiry_Data
MSC_Mode_Sense6_data
MSC_Mode_Sense10_data
__aeabi_uidiv
USBD_LL_Transmit
MSC_BOT_SendCSW
USBD_LL_PrepareReceive
